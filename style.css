/* ====== รีเซ็ตเล็กน้อย ====== */
* {
  box-sizing: border-box;
}

/* 1) พื้นหลังหน้าเว็บ จากฟ้า → ชมพูพาสเทล */
body {
  margin: 0;
  font-family: "Saraban", system-ui, -apple-system, "Segoe UI", sans-serif;
  /* เดิม: background: #f3f4ff; */
  background: radial-gradient(circle at top, #ffe3f4 0%, #ffeef9 45%, #fff 85%);
  color: #1f2937;
  min-height: 100vh;
}
/* ====== ส่วนหัวบนสุด (แบบใหม่) ====== */
.topbar {
  position: relative;
  background: linear-gradient(120deg, #8b2dd9 0%, #d636b4 45%, #ff5f7a 100%);
  color: #fff;
  padding: 2.4rem 1.5rem 3.1rem;
  text-align: center;
  overflow: hidden;
}
.topbar-logo {
  width: 180px;      /* ปรับตรงนี้ให้ใหญ่/เล็กได้ */
  height: auto;
  flex: 0 0 auto;
  border-radius: 999px;
  filter: drop-shadow(0 8px 20px rgba(0,0,0,.16));
  z-index: 3;
}
.topbar h1 {
  font-size: clamp(3rem, 5.2vw, 3.7rem);
  margin: 0;
  font-weight: 800;
  letter-spacing: 0.01em;
  line-height: 1.05;
  text-shadow: 0 10px 28px rgba(0,0,0,.15);
}

/* ให้ป้ายโรงพยาบาลดูสมดุลกับหัวใหญ่ๆ */
.topbar .hospital-badge {
  font-size: 2.25rem;
  padding: 0.55rem 2.4rem;
}


/* ฟองอากาศหลายสี */
.topbar .bubble-dot {
  position: absolute;
  border-radius: 999px;
  filter: drop-shadow(0 6px 14px rgba(0,0,0,.08));
  animation: floaty 4.5s ease-in-out infinite;
  opacity: .9;
}

/* แต่ละลูกต่างตำแหน่ง/ขนาด/สี/ดีเลย์ */
.topbar .dot1 {
  top: 14px; left: 10%;
  width: 26px; height: 26px;
  background: rgba(255, 255, 255, .65);
}
.topbar .dot2 {
  top: 60px; left: 5%;
  width: 18px; height: 18px;
  background: rgba(255, 225, 245, .8);
  animation-delay: .25s;
}
.topbar .dot3 {
  top: 90px; left: 16%;
  width: 14px; height: 14px;
  background: rgba(195, 248, 255, .75);
  animation-delay: .5s;
}
.topbar .dot4 {
  top: 22px; right: 14%;
  width: 22px; height: 22px;
  background: rgba(255, 246, 209, .8);
  animation-delay: .75s;
}
.topbar .dot5 {
  bottom: 30px; right: 20%;
  width: 30px; height: 30px;
  background: rgba(163, 217, 255, .78);
  animation-delay: 1s;
}
.topbar .dot6 {
  bottom: 55px; left: 32%;
  width: 15px; height: 15px;
  background: rgba(255, 200, 230, .75);
  animation-delay: 1.35s;
}
.topbar .dot7 {
  top: 18px; left: 42%;
  width: 20px; height: 20px;
  background: rgba(255, 255, 255, .5);
  animation-delay: 1.6s;
}
.topbar .dot8 {
  bottom: -6px; left: 55%;
  width: 36px; height: 36px;
  background: rgba(255, 214, 255, .7);
  animation-delay: 1.9s;
}
.topbar .dot9 {
  bottom: -6px; left: 55%;
  width: 36px; height: 36px;
  background: rgba(255, 214, 255, .7);
  animation-delay: 1.9s;
}
.topbar .dot10 {
  bottom: 55px; left: 32%;
  width: 15px; height: 15px;
  background: rgba(255, 200, 230, .75);
  animation-delay: 1.35s;
}
.topbar .dot11 {
  bottom: 30px; right: 20%;
  width: 30px; height: 30px;
  background: rgba(163, 217, 255, .78);
  animation-delay: 1s;
}
.topbar .dot12 {
  top: 90px; left: 16%;
  width: 14px; height: 14px;
  background: rgba(195, 248, 255, .75);
  animation-delay: .5s;
}
.topbar .dot13 {
  top: 14px; left: 10%;
  width: 26px; height: 26px;
  background: rgba(255, 255, 255, .65);
}
.topbar .dot14 {
  top: 14px; left: 10%;
  width: 26px; height: 26px;
  background: rgba(255, 255, 255, .65);
}
.topbar .dot15 {
  top: 60px; left: 5%;
  width: 18px; height: 18px;
  background: rgba(255, 225, 245, .8);
  animation-delay: .25s;
}
/* ลอยเร็วขึ้นหน่อย */
@keyframes floaty {
  0%   { transform: translateY(0) translateX(0); opacity: .9; }
  30%  { transform: translateY(-10px) translateX(3px); opacity: .7; }
  60%  { transform: translateY(6px) translateX(-3px); opacity: .55; }
  100% { transform: translateY(0) translateX(0); opacity: .9; }
}

/* ====== เมนูแท็บ ====== */
/* 2) ให้เมนู 1–6 กระจายเต็มแถบเลย */
.tabs {
  display: grid;
  grid-template-columns: repeat(6, minmax(130px, 1fr));
  gap: 1rem;
  padding: 0.6rem 1.5rem 1rem;
  background: #fff;
  box-shadow: 0 3px 10px rgba(124, 58, 237, 0.08);
  align-items: center;
  /* ไม่ต้องเลื่อนแนวนอนแล้ว */
  overflow-x: hidden;
}

/* 3) ปุ่ม 1–6 ให้เข้มขึ้น นูน มีมิติ */
.tabs button {
  border: none;
  background: #f7f0ff;
  padding: .65rem 1.2rem .7rem;
  border-radius: 999px;
  font-size: .96rem;
  font-weight: 600;
  color: #4b5563;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  min-height: 45px;
  /* สำคัญ: ให้กินพื้นที่กริดเต็ม */
  width: 100%;
  /* ปุ่มนูน */
  box-shadow: 0 10px 22px rgba(148, 163, 184, 0.26);
  border: 1px solid rgba(147, 51, 234, 0);
  transition: transform .12s ease-out, box-shadow .12s ease-out, background .12s;
}

/* เวลา hover ให้ดูลอยขึ้นนิดนึง */
.tabs button:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 26px rgba(147, 51, 234, .16);
}

/* ปุ่มที่ active อยู่ */
.tabs button.active {
  background: radial-gradient(circle at 15% 15%, rgba(255,255,255,0.55) 0, rgba(255,255,255,0) 45%),
              linear-gradient(135deg, #ffffff 0%, #f4e6ff 55%, #ecd9ff 100%);
  color: #1f2937;
  border: 1px solid rgba(147, 51, 234, .5);
  box-shadow: 0 14px 30px rgba(147, 51, 234, .25);
}

/* === โทนสีของแต่ละปุ่มตอน "ยังไม่ active" ให้เข้มขึ้นหน่อย === */
.tabs button:nth-child(1):not(.active) {
  background: rgba(124, 58, 237, 0.16);
  color: #3b0764;
}
.tabs button:nth-child(2):not(.active) {
  background: rgba(59, 130, 246, 0.16);
  color: #1d4ed8;
}
.tabs button:nth-child(3):not(.active) {
  background: rgba(45, 212, 191, 0.16);
  color: #0f766e;
}
.tabs button:nth-child(4):not(.active) {
  background: rgba(251, 146, 60, 0.16);
  color: #c05621;
}
.tabs button:nth-child(5):not(.active) {
  background: rgba(244, 63, 94, 0.16);
  color: #be123c;
}
.tabs button:nth-child(6):not(.active) {
  background: rgba(99, 102, 241, 0.16);
  color: #3730a3;
}

/* ถ้าหน้าจอแคบให้กลับไปเลื่อนแบบเดิม */
@media (max-width: 980px) {
  .tabs {
    display: flex;
    overflow-x: auto;
    gap: .6rem;
  }
  .tabs button {
    width: auto;
    min-width: 130px;
  }
}


/* ====== หน้า (6 หน้า) ====== */
.page {
  display: none;
  max-width: 1180px;
  margin: 1.2rem auto 4.5rem;
  padding: 0 1rem;
}
.page.visible {
  display: block;
}

/* =================================
   หน้า 1 — ระบบผิวหนัง
   ================================= */
.p1-wrapper {
  background: linear-gradient(135deg, #ffe3d0 0%, #eef5ff 50%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, .4);
  border-radius: 1.6rem;
  padding: 1.6rem 1.9rem 6rem;
  box-shadow: 0 14px 30px rgba(124, 58, 237, 0.08);
  position: relative;
}

.p1-title {
  font-size: 1.4rem;
  margin-bottom: 1.25rem;
  color: #312e81;
  font-weight: 700;
}

.p1-section {
  background: rgba(255, 255, 255, .65);
  border: 1px solid rgba(148, 163, 184, .2);
  border-radius: 1.2rem;
  padding: 1.2rem 1.05rem 1.2rem;
  margin-bottom: 1.1rem;
  backdrop-filter: blur(2px);
}

.p1-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: 1.05rem;
  font-weight: 700;
  margin: 0 0 1rem;
  color: #312e81;
}
.p1-sec-title .icon {
  font-size: 1.3rem;
}
.p1-sec-title.blue { color: #0f766e; }
.p1-sec-title.purple { color: #6d28d9; }
.p1-sec-title.green { color: #166534; }

.p1-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: 1rem;
}
.p1-grid label,
.p1-block label {
  display: flex;
  flex-direction: column;
  gap: .3rem;
  font-size: .9rem;
  color: #374151;
}
.p1-grid input,
.p1-grid textarea,
.p1-block input,
.p1-block select,
#p1_onset_select,
#p1_onset_other {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .55rem .7rem;
  font-size: .9rem;
  outline: none;
  background: #fff;
  transition: border .15s;
}
.p1-grid input:focus,
.p1-grid textarea:focus,
.p1-block input:focus,
.p1-block select:focus,
#p1_onset_select:focus,
#p1_onset_other:focus {
  border: 1px solid rgba(124, 58, 237, .7);
  box-shadow: 0 0 0 3px rgba(124, 58, 237, .12);
}
.p1-grid textarea {
  min-height: 70px;
  resize: vertical;
}
.p1-col-2 { grid-column: span 2; }

.p1-block {
  background: rgba(238, 250, 255, .6);
  border: 1px solid rgba(179, 216, 255, .55);
  border-radius: 1rem;
  padding: .9rem 1rem 1rem;
  margin-bottom: .8rem;
}
.p1-block h4 {
  margin: 0 0 .6rem;
  font-size: .9rem;
  color: #0f172a;
  font-weight: 700;
}

.p1-col {
  display: flex;
  flex-direction: column;
  gap: .4rem;
}
.p1-col.p1-col-2col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}
.p1-two-cols {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}
.p1-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
  font-size: .88rem;
  text-align: left;
}
.p1-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  margin-top: 3px;
  accent-color: #6366f1;
  cursor: pointer;
}

.p1-other {
  width: 100%;
  margin-top: .35rem;
  border: 1px solid rgba(99, 102, 241, .35);
  border-radius: .65rem;
  padding: .5rem .7rem;
  font-size: .85rem;
  background: #fff;
}

/* ✅ เพิ่มตรงนี้ เพื่อให้ select ของหน้า 1 โค้งเหมือนช่อง input */
.p1-wrapper select,
.p1-grid select,
.p1-block select,
.p1-section-onset select {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .55rem .7rem;
  font-size: .9rem;
  background: #fff;
  outline: none;
  transition: border .15s;
  width: 100%;
}
.p1-wrapper select:focus,
.p1-grid select:focus,
.p1-block select:focus,
.p1-section-onset select:focus {
  border: 1px solid rgba(124, 58, 237, .7);
  box-shadow: 0 0 0 3px rgba(124, 58, 237, .12);
}

.p1-indent {
  margin-left: 1.6rem;
  display: flex;
  gap: 1.2rem;
  flex-wrap: wrap;
}

/* ส่วนที่ 3 ระยะเวลา */
.p1-section-onset {
  background: linear-gradient(135deg, #ffe0f3 0%, #fff 55%);
  border-color: rgba(236, 72, 153, 0.28);
}
.p1-section-onset .p1-sec-title {
  color: #a21caf;
}

/* ส่วนที่ 4 อัปโหลดรูป */
.p1-upload {
  border: 2px dashed rgba(21, 128, 61, .35);
  background: rgba(236, 253, 245, .55);
  border-radius: 1rem;
  padding: 1.25rem 1.25rem 1rem;
  text-align: center;
}
.p1-upload-icon { font-size: 2.4rem; }
.btn-upload {
  background: #7c3aed;
  border: none;
  color: #fff;
  padding: .5rem 1.1rem;
  border-radius: .7rem;
  cursor: pointer;
  font-size: .85rem;
  margin-top: .5rem;
  transition: filter .1s;
}
.btn-upload:hover { filter: brightness(1.03); }
.p1-upload-name {
  font-size: .75rem;
  margin-top: .4rem;
  color: #166534;
}
.p1-preview {
  margin-top: .7rem;
  max-width: 160px;
  border-radius: .7rem;
  box-shadow: 0 6px 14px rgba(15, 118, 110, .28);
}
.p1-upload.dragover {
  background: rgba(236, 253, 245, .9);
  border-color: rgba(22, 163, 74, 1);
}

/* ปุ่มด้านล่างหน้า 1 */
.p1-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}
@media (max-width: 900px) {
  .p1-actions {
    flex-direction: column-reverse;
    align-items: stretch;
  }
}
.btn-primary {
  background: linear-gradient(125deg, #2563eb 0%, #7c3aed 80%);
  border: none;
  color: #fff;
  padding: .75rem 1.5rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 12px 20px rgba(45, 103, 255, .3);
}
.btn-primary:hover { filter: brightness(1.02); }
.btn-danger {
  background: #ef4444;
  border: none;
  color: #fff;
  padding: .75rem 1.1rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 12px rgba(239, 68, 68, .25);
}
.btn-danger:hover { filter: brightness(1.02); }

/* =================================
   หน้า 2 — ระบบอื่นๆ (เวอร์ชันรวม)
   ================================= */
.p2-wrapper {
  background: linear-gradient(180deg, #fff 0%, #fef3f2 100%);
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.4rem;
  padding: 1.5rem 1.4rem 2rem;
  box-shadow: 0 10px 25px rgba(15,23,42,.05);
}
.p2-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #7c2d12;
  margin-bottom: .9rem;
  font-size: 1.35rem;
}
.p2-section {
  background: rgba(255,255,255,.7);
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.1rem;
  padding: 1.2rem 1rem 1rem;
  margin-bottom: 1.1rem;
}
.p2-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #b91c1c;
  margin-bottom: .8rem;
}
.p2-sec-title.purple { color: #6d28d9; }
.p2-block {
  background: #fff;
  border-radius: .9rem;
  padding: .6rem .6rem .4rem;
  border: 1px solid rgba(148,163,184,.08);
  margin-bottom: .65rem;
}
.p2-block h4 {
  margin: 0 0 .5rem;
  color: #be123c;
  font-size: .92rem;
}
.p2-row {
  background: #f8fafc;
  border-radius: .7rem;
  padding: .5rem .7rem .6rem;
  margin-bottom: .5rem;
}
.p2-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
}
.p2-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
  cursor: pointer;
}
.p2-detail {
  margin-top: .4rem;
  width: 100%;
  border: 1px solid rgba(124,58,237,.35);
  border-radius: .6rem;
  padding: .4rem .55rem;
  font-size: .85rem;
  background: #fff;
}
.p2-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.4rem;
}
@media (max-width: 900px) {
  .p2-actions {
    flex-direction: column-reverse;
  }
}

/* =================================
   หน้า 3 — Lab
   ================================= */
.p3-wrapper {
  background: linear-gradient(135deg, #d1fae5 0%, #ecfdf3 35%, #ffffff 100%);
  border: 1px solid rgba(16, 185, 129, 0.25);
  border-radius: 1.4rem;
  padding: 1.4rem 1.5rem 3.9rem;
  box-shadow: 0 14px 35px rgba(13, 148, 136, 0.08);
}
.p3-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #065f46;
  display: flex;
  gap: .6rem;
  align-items: center;
  margin-bottom: .35rem;
}
.p3-subtitle {
  margin: 0 0 1.1rem;
  color: #047857;
  font-size: .9rem;
}
.p3-sections {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.p3-section {
  background: #fff;
  border: 1px solid rgba(45, 212, 191, 0.25);
  border-radius: 1.1rem;
  padding: 1.05rem 1.05rem 1.1rem;
  box-shadow: 0 8px 16px rgba(13, 148, 136, 0.05);
}
.p3-row {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem 1rem;
  align-items: center;
  background: rgba(236, 253, 245, .4);
  border: 1px solid rgba(16, 185, 129, .12);
  border-radius: .9rem;
  padding: .55rem .65rem .6rem;
  margin-bottom: .65rem;
}
.p3-row-check {
  display: flex;
  gap: .55rem;
  align-items: center;
  min-width: 200px;
  font-weight: 500;
  color: #065f46;
}
.p3-row-check input {
  width: 17px;
  height: 17px;
  accent-color: #10b981;
}
.p3-row-inputs {
  display: flex;
  gap: .4rem;
  align-items: center;
  flex: 1 1 auto;
  min-width: 280px;
}
.p3-val,
.p3-detail {
  border: 1px solid rgba(45, 212, 191, 0.55);
  border-radius: .6rem;
  padding: .35rem .55rem;
  font-size: .83rem;
  outline: none;
  background: #fff;
}
.p3-val { width: 130px; }
.p3-unit {
  font-size: .8rem;
  color: #047857;
  white-space: nowrap;
}
.p3-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
}
@media (max-width: 880px) {
  .p3-row { flex-direction: column; align-items: flex-start; }
  .p3-row-inputs { width: 100%; }
  .p3-actions { flex-direction: column; }
}

/* =================================
   หน้า 4 — Naranjo
   ================================= */
.p4-wrapper {
  background: radial-gradient(circle at top, #ffe1f2 0%, #ffd1aa 40%, #fff 70%);
  border: 1px solid rgba(255, 149, 189, 0.22);
  border-radius: 1.2rem;
  padding: 1.3rem 1.3rem 5.5rem;
  box-shadow: 0 20px 40px rgba(245, 111, 149, 0.08);
  position: relative;
  overflow: hidden;
}
.p4-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
  margin-bottom: 1rem;
  position: relative;
  z-index: 5;
}
.p4-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #7a215f;
  display: flex;
  gap: .4rem;
  align-items: center;
}
.p4-add-btn {
  background: linear-gradient(120deg, #22c55e 0%, #16a34a 40%, #22c55e 80%);
  border: none;
  color: #fff;
  padding: .55rem 1.1rem;
  border-radius: .9rem;
  font-weight: 600;
  box-shadow: 0 10px 25px rgba(34, 197, 94, .35);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .4rem;
}
.p4-drug-card {
  background: rgba(255, 255, 255, .9);
  border: 1px solid rgba(255, 171, 196, 0.35);
  border-radius: 1rem;
  padding: 1rem 1rem 1.1rem;
  margin-bottom: 1rem;
  backdrop-filter: blur(3px);
  box-shadow: 0 12px 18px rgba(255, 172, 190, 0.07);
}
.p4-qblock {
  background: rgba(255, 242, 243, .85);
  border: 1px solid rgba(255, 149, 159, .18);
  border-radius: .8rem;
  padding: .6rem .55rem .55rem;
  margin-bottom: .6rem;
}
.p4-ans-row {
  display: flex;
  gap: .45rem;
  flex-wrap: wrap;
}
.p4-choice {
  border: 1px solid rgba(124, 58, 237, 0.12);
  background: #fff;
  border-radius: .6rem;
  padding: .35rem .8rem .4rem;
  font-size: .83rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .3rem;
}
.p4-choice.is-positive {
  background: radial-gradient(circle, #22c55e 0%, #16a34a 55%, #15803d 100%);
  color: #fff;
}
.p4-choice.is-negative {
  background: radial-gradient(circle, #f97316 0%, #ea580c 65%);
  color: #fff;
}
.p4-choice.is-unknown {
  background: radial-gradient(circle, #f973c2 0%, #db2777 75%);
  color: #fff;
}
.p4-summary {
  background: rgba(255, 255, 255, .92);
  border: 1px solid rgba(255, 180, 192, .35);
  border-radius: 1rem;
  padding: .8rem .8rem 1rem;
  margin-top: 1rem;
  box-shadow: 0 10px 18px rgba(255, 145, 169, 0.08);
}
.p4-score {
  font-size: 1.6rem;
  font-weight: 700;
  color: #7a215f;
}

/* =================================
   หน้า 5 — Timeline (เวอร์ชันสุดท้ายที่ไม่ซ้ำ)
   ================================= */
#page5 {
  background: radial-gradient(circle at top, #ffe9ff 0%, #f8f5ff 50%, #ffffff 100%);
  border-radius: 1.6rem;
  padding: 1.5rem 1.4rem 2.6rem;
  box-shadow: 0 16px 38px rgba(143, 93, 255, 0.06);
  position: relative;
}
#page5 .p5-wrapper {
  max-width: 1180px;
  margin: 0 auto;
  background: radial-gradient(circle at 0 0, #fff9d5 0%, #ffe7f6 40%, #ffffff 100%);
  border: 1px solid rgba(255, 171, 184, 0.16);
  border-radius: 1.4rem;
  padding: 1.3rem 1.3rem 1.6rem;
  box-shadow: 0 18px 45px rgba(243, 159, 190, 0.08);
  position: relative;
  overflow: hidden;
}
#page5 .p5-wrapper::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.6) 0, rgba(255,255,255,0) 45%),
    radial-gradient(circle, rgba(255,230,245,.5) 0, rgba(255,230,245,0) 55%);
  background-size: 210px 210px, 150px 150px;
  mix-blend-mode: screen;
  pointer-events: none;
  animation: p5sparkle 10s linear infinite;
  opacity: .7;
  z-index: 0;
}

@keyframes p5sparkle {
  0%   { background-position: 0 0, 90px 120px; opacity:.7; }
  50%  { background-position: 140px 100px, 10px 20px; opacity:.35; }
  100% { background-position: 0 0, 90px 120px; opacity:.7; }
}

#page5 .p5-header-line {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  align-items: center;
  margin-bottom: 1rem;
}
#page5 .p5-header-line h2 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
  color: #251b5a;
}
#page5 .p5-btn-group {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
}
#page5 .p5-btn-group button {
  border: none;
  border-radius: .9rem;
  padding: .45rem .95rem .5rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(15,23,42,.05);
  display: inline-flex;
  align-items: center;
  gap: .3rem;
}
#page5 .p5-btn-add-drug   { background: #22c55e; color: #fff; }
#page5 .p5-btn-add-adr    { background: #ef4444; color: #fff; }
#page5 .p5-btn-del-drug,
#page5 .p5-btn-del-adr    { background: #fff1f2; color: #be123c; }

#page5 .p5-form-block {
  position: relative;
  z-index: 2;
  background: rgba(255, 255, 255, .75);
  border: 1px solid rgba(209, 213, 219, .35);
  border-radius: 1.1rem;
  padding: 1rem .9rem 1.05rem;
  margin-bottom: .9rem;
  box-shadow: 0 10px 20px rgba(15, 23, 42, .02);
}
#page5 .p5-drug-card,
#page5 .p5-adr-card {
  background: #ffffff;
  border: 1px solid rgba(148, 163, 184, .3);
  border-radius: 1rem;
  padding: .7rem .7rem .55rem;
  margin-bottom: .65rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: .6rem .8rem;
}
#page5 .p5-field {
  display: flex;
  flex-direction: column;
  gap: .25rem;
}
#page5 .p5-field label {
  font-size: .78rem;
  font-weight: 600;
  color: #0f172a;
}
#page5 input[type="text"],
#page5 input[type="date"],
#page5 input[type="time"] {
  border: 1px solid rgba(148, 163, 184, .5);
  border-radius: .65rem;
  padding: .36rem .5rem;
  font-size: .85rem;
  background: #fff;
  outline: none;
}
#page5 input[type="text"]:focus,
#page5 input[type="date"]:focus,
#page5 input[type="time"]:focus {
  border: 1px solid rgba(79,70,229,.7);
  box-shadow: 0 0 0 3px rgba(79,70,229,.12);
}

/* กล่องแสดง timeline */
#page5 .p5-timeline-box {
  background: #fff;
  border: 1px dashed rgba(148,163,184,.35);
  border-radius: 1rem;
  padding: .7rem .6rem 1rem;
  min-height: 160px;
  position: relative;
  z-index: 2;
}
#page5 .p5-timeline-box h3 {
  margin: 0 0 .5rem;
  font-size: 1.02rem;
  font-weight: 700;
}
#p5TimelineScroll {
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  background: linear-gradient(180deg, #fff, rgba(255,255,255,.7));
  border-radius: .9rem;
  padding: .75rem .4rem .6rem;
}
#p5TimelineScroll::-webkit-scrollbar { height: 9px; }
#p5TimelineScroll::-webkit-scrollbar-track {
  background: rgba(148,163,184,.12);
  border-radius: 999px;
}
#p5TimelineScroll::-webkit-scrollbar-thumb {
  background: rgba(79,70,229,.6);
  border-radius: 999px;
}
#p5DateRow {
  display: flex;
  gap: 0;
  border-bottom: 1px solid rgba(15,23,42,.12);
  margin-bottom: .5rem;
}
#p5DateRow .p5-date-cell {
  width: 120px; /* ต้องตรงกับ JS */
  text-align: center;
  font-size: .78rem;
  font-weight: 600;
  color: #0f172a;
  padding-bottom: .35rem;
  white-space: nowrap;
}
#page5 .p5-lane {
  display: flex;
  gap: .6rem;
  align-items: center;
  margin-top: .4rem;
}
#page5 .p5-lane-label {
  width: 70px;
  text-align: right;
  font-weight: 600;
  color: #0f766e;
}
#page5 .p5-lane-label.p5-lane-adr { color: #b91c1c; }
#p5DrugLane,
#p5AdrLane {
  position: relative;
  height: 44px;
}
.p5-bar {
  position: absolute;
  top: 7px;
  height: 30px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .78rem;
  font-weight: 600;
  color: #fff;
  padding: 0 .9rem;
  box-shadow: 0 10px 22px rgba(15,23,42,.12);
}
.p5-bar-drug {
  background: linear-gradient(120deg, #2563eb 0%, #0ea5e9 95%);
}
.p5-bar-adr {
  background: linear-gradient(120deg, #ef4444 0%, #f97316 95%);
}

/* ปุ่มล่างติดพื้น */
#page5 .p5-footer-btns {
  display: flex;
  gap: .7rem;
  margin-top: 1rem;
  position: sticky;
  bottom: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,1));
  padding-top: .4rem;
}
#page5 .p5-footer-btns button {
  border: none;
  border-radius: .9rem;
  padding: .55rem 1.15rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 10px 22px rgba(15,23,42,.08);
}
#page5 .p5-print { background: #22c55e; color: #fff; }
#page5 .p5-next  { background: #4f46e5; color: #fff; }
#page5 .p5-clear { background: #ef4444; color: #fff; }

@media (max-width: 900px) {
  #page5 .p5-header-line {
    flex-direction: column;
    align-items: flex-start;
  }
  #p5DateRow .p5-date-cell { width: 110px; }
  #page5 .p5-footer-btns { flex-direction: column; }
}

/* ====== ของหน้าอื่น (โครงกล่อง) ====== */
#page2 .card,
#page3 .card,
#page4 .card,
#page5 .card,
#page6 .card {
  background: #fff;
  border: 1px solid rgba(148, 163, 184, .25);
  border-radius: 1rem;
  padding: 1rem 1.1rem;
  margin-bottom: .6rem;
  box-shadow: 0 8px 12px rgba(15, 23, 42, .02);
}

/* ====== Responsive ทั่วไป ====== */
@media (max-width: 900px) {
  .tabs { gap: .6rem; }
  .tabs button { border-radius: 1.5rem; }
  .p1-wrapper { padding: 1.1rem .8rem 5rem; }
}

/* ====== Print ====== */
@media print {
  .topbar, .tabs { display: none !important; }
  body { background: #fff; }
  #page5 .p5-footer-btns,
  #page5 .p5-header-line { display: none !important; }
  #p5TimelineScroll { overflow: visible !important; }
}
/* ===== หน้า 5 ปรับ label timeline ออกซ้าย ===== */
#page5 .p5-lane {
  align-items: flex-start;
}
#page5 .p5-lane-label {
  width: 56px;
  text-align: left;
  margin-right: 0.35rem;
  transform: translateX(-12px); /* ดึงออกมาทางซ้าย ไม่ให้ตรงวันที่ */
}
#page5 .p5-lane-label.p5-lane-adr {
  color: #b91c1c;
}

/* ===== ปุ่มล่างหน้า 5 ให้แบบรูปที่ 2 (น้ำเงินบน แดงล่าง) ===== */
#page5 .p5-footer-btns {
  display: flex;
  flex-direction: column;
  gap: .55rem;
}
#page5 .p5-footer-btns .p5-next {
  order: 1;           /* บันทึก/ไปหน้า 6 อยู่บน */
}
#page5 .p5-footer-btns .p5-clear {
  order: 2;           /* ล้างอยู่ล่าง */
}
/* ========== ปรับ label ยา / ADR ไม่ให้ตกขอบ ========== */
#page5 .p5-lane {
  align-items: flex-start;
}
#page5 .p5-lane-label {
  width: 50px;
  padding-left: 12px;   /* ดันออกจากขอบซ้าย */
  margin-right: 8px;
  text-align: left;
  font-weight: 700;
  line-height: 1.4;
}

/* ปุ่มลบบนหน้า 5 ให้โค้งมน น่ารัก */
.p5-del-btn {
  background: radial-gradient(circle at top, #fee2e2 0%, #fca5a5 60%, #ef4444 100%);
  border: none;
  color: #fff;
  padding: 0.35rem 1.1rem 0.4rem;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 16px rgba(239, 68, 68, 0.28);
}
.p5-del-btn:hover {
  filter: brightness(1.02);
}
/* ปุ่มล่างหน้า 5 แบบเต็มแถว */
.p5-footer-btns {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 1.5rem;
}

.p5-bottom-btn {
  width: 100%;
  border: none;
  border-radius: 9999px;
  padding: 0.85rem 1rem;
  font-weight: 700;
  font-size: 1.05rem;
  color: #fff;
  cursor: pointer;
  box-shadow: 0 12px 25px rgba(0,0,0,0.08);
}

/* ปุ่มบน (ม่วงไล่โทน) */
.p5-bottom-primary {
  background: radial-gradient(circle at 15% 20%, rgba(255,255,255,0.35) 0, rgba(255,255,255,0) 50%),
              linear-gradient(90deg, #364af7 0%, #7a2df5 53%, #a139f4 100%);
}

/* ปุ่มล่าง (แดง) */
.p5-bottom-danger {
  background: radial-gradient(circle at 10% 25%, rgba(255,255,255,0.25) 0, rgba(255,255,255,0) 45%),
              linear-gradient(90deg, #f04438 0%, #f25d44 50%, #f26a4d 100%);
}

.p5-meta-now {
  margin-top: 0.4rem;
  margin-bottom: 1rem;
  font-size: 0.85rem;
  color: #475569;
}
/* ปุ่มพิมพ์ Timeline สีชมพูนม */
#p5Print,
#page5 .p5-bottom-print,
#page5 .p5-print {
  background: linear-gradient(135deg, #f9c5d1 0%, #f8a5c2 45%, #f78fb3 100%);
  color: #fff;
  box-shadow: 0 10px 20px rgba(247, 143, 179, 0.35);
}
/* ===== ปรับความสูงปกด้านบนให้เตี้ยลง ===== */
.topbar {
  padding: 1.6rem 1.5rem 2.2rem;   /* เดิมมันสูงกว่านี้ ลดลงทั้งบน-ล่าง */
  min-height: auto;
}

/* ย่อโลโก้ให้ไม่กินพื้นที่แนวตั้งเยอะ */
.topbar img.topbar-logo {
  width: 140px;         /* ถ้ายังใหญ่ไป ลดเหลือ 120px ได้ */
  height: auto;
  margin-bottom: 1.1rem;
}

/* จอกว้างให้เตี้ยกว่านี้อีกนิด */
@media (min-width: 1024px) {
  .topbar {
    padding: 1.4rem 1.5rem 2rem;
  }
}
/* ขยายตราโรงพยาบาลบนหัวเว็บ */
.topbar img.topbar-logo {
  width: 190px;   /* เดิม 140px */
  height: auto;
  margin-bottom: 1.1rem;
}

