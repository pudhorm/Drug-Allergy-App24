/* ====== รีเซ็ตเล็กน้อย ====== */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Tahoma", sans-serif;
  background: #f3f4ff;
  color: #1f2937;
  min-height: 100vh;
}

/* ====== ส่วนหัวบนสุด ====== */
.topbar {
  position: relative;
  background: linear-gradient(120deg, #7c3aed 0%, #ec4899 50%, #fb7185 100%);
  color: #fff;
  padding: 2.6rem 1.5rem 3.3rem;
  text-align: center;
  overflow: hidden;
}

/* ฟองอากาศลอย */
.topbar::before,
.topbar::after {
  content: "";
  position: absolute;
  width: 140px;
  height: 140px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.12);
  animation: bubble 6s infinite ease-in-out;
}
.topbar::before {
  top: -40px;
  left: 12%;
}
.topbar::after {
  bottom: -50px;
  right: 18%;
  animation-delay: 1.2s;
}

@keyframes bubble {
  0% { transform: translateY(0); opacity: .8; }
  50% { transform: translateY(10px); opacity: .4; }
  100% { transform: translateY(0); opacity: .8; }
}

.topbar h1 {
  font-size: clamp(2.1rem, 3vw, 2.7rem);
  margin: 0;
  font-weight: 700;
  letter-spacing: 0.01em;
}

.topbar p {
  margin-top: 1rem;
  margin-bottom: 0;
  font-size: 1.05rem;
}

.topbar .hospital-badge {
  display: inline-block;
  margin-top: 1rem;
  background: rgba(255, 255, 255, 0.25);
  padding: .5rem 1.8rem;
  border-radius: 999px;
  font-weight: 500;
  backdrop-filter: blur(6px);
}

/* ====== เมนูแท็บ ====== */
.tabs {
  display: flex;
  gap: 1rem;
  /* ดันปุ่มให้ลงมาจากขอบบนหน่อย */
  padding: 0.6rem 1.5rem 1rem;
  background: #fff;
  box-shadow: 0 3px 10px rgba(124, 58, 237, 0.08);
  overflow-x: auto;
  align-items: center; /* ให้ปุ่มอยู่กลางแนวตั้ง */
}

.tabs::-webkit-scrollbar {
  height: 7px;
}
.tabs::-webkit-scrollbar-track {
  background: #e5e7eb;
  border-radius: 999px;
}
.tabs::-webkit-scrollbar-thumb {
  background: #9333ea;
  border-radius: 999px;
}

.tabs button {
  border: none;
  background: #f1f2ff;
  padding: .6rem 1.4rem .65rem;
  border-radius: 999px;         /* ให้โค้งครบ */
  font-size: .95rem;
  font-weight: 500;
  color: #4b5563;
  cursor: pointer;
  flex: 0 0 auto;
  transition: all .15s ease-in-out;
  border: 1px solid rgba(147, 51, 234, 0);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  min-width: 130px;
  text-align: center;
}


.tabs button:hover {
  background: #e2e7ff;
}

.tabs button.active {
  background: #fff;
  color: #1f2937;
  border: 1px solid rgba(147, 51, 234, .35);
  box-shadow: 0 8px 18px rgba(147, 51, 234, .15);
}

/* ปุ่มที่ยังไม่ active ให้เป็นสีต่างกัน */
.tabs button:nth-child(1):not(.active) {
  background: rgba(124, 58, 237, 0.12);
  color: #4c1d95;
}
.tabs button:nth-child(2):not(.active) {
  background: rgba(59, 130, 246, 0.12);
  color: #1d4ed8;
}
.tabs button:nth-child(3):not(.active) {
  background: rgba(45, 212, 191, 0.14);
  color: #0f766e;
}
.tabs button:nth-child(4):not(.active) {
  background: rgba(251, 146, 60, 0.14);
  color: #c05621;
}
.tabs button:nth-child(5):not(.active) {
  background: rgba(244, 63, 94, 0.12);
  color: #be123c;
}
.tabs button:nth-child(6):not(.active) {
  background: rgba(99, 102, 241, 0.12);
  color: #3730a3;
}

/* ตอน active ให้เป็นเหมือนเดิมคือขาว + ขอบ + เงา */
.tabs button.active {
  background: #fff;
  color: #1f2937;
  border: 1px solid rgba(147, 51, 234, .35);
  box-shadow: 0 8px 18px rgba(147, 51, 234, .15);
}

/* ====== หน้า (6 หน้า) ====== */
.page {
  display: none;
  max-width: 1180px;
  margin: 1.2rem auto 4.5rem;
  padding: 0 1rem;
}
.page.visible {
  display: block;
}

/* ====== หน้า 1 โครงรวม ====== */
.p1-wrapper {
  background: linear-gradient(135deg, #ffe3d0 0%, #eef5ff 50%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, .4);
  border-radius: 1.6rem;
  padding: 1.6rem 1.9rem 6rem;
  box-shadow: 0 14px 30px rgba(124, 58, 237, 0.08);
  position: relative;
}

.p1-title {
  font-size: 1.4rem;
  margin-bottom: 1.25rem;
  color: #312e81;
  font-weight: 700;
}

/* ====== ส่วนหลักของหน้า 1 (4 ส่วน) ====== */
.p1-section {
  background: rgba(255, 255, 255, .65);
  border: 1px solid rgba(148, 163, 184, .2);
  border-radius: 1.2rem;
  padding: 1.2rem 1.05rem 1.2rem;
  margin-bottom: 1.1rem;
  backdrop-filter: blur(2px);
}

.p1-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: 1.05rem;
  font-weight: 700;
  margin: 0 0 1rem;
  color: #312e81;
}
.p1-sec-title .icon {
  font-size: 1.3rem;
}
.p1-sec-title.blue {
  color: #0f766e;
}
.p1-sec-title.purple {
  color: #6d28d9;
}
.p1-sec-title.green {
  color: #166534;
}

/* กริดข้อมูลผู้ป่วย */
.p1-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: 1rem;
}

.p1-grid label,
.p1-block label {
  display: flex;
  flex-direction: column;
  gap: .3rem;
  font-size: .9rem;
  color: #374151;
}

.p1-grid input,
.p1-grid textarea,
.p1-block input,
.p1-block select,
#p1_onset_select,
#p1_onset_other {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .55rem .7rem;
  font-size: .9rem;
  outline: none;
  background: #fff;
  transition: border .15s;
}

.p1-grid input:focus,
.p1-grid textarea:focus,
.p1-block input:focus,
.p1-block select:focus,
#p1_onset_select:focus,
#p1_onset_other:focus {
  border: 1px solid rgba(124, 58, 237, .7);
  box-shadow: 0 0 0 3px rgba(124, 58, 237, .12);
}

.p1-grid textarea {
  min-height: 70px;
  resize: vertical;
}

.p1-col-2 {
  grid-column: span 2;
}

/* ====== บล็อกย่อย (1.1 – 1.21) ====== */
.p1-block {
  background: rgba(238, 250, 255, .6);
  border: 1px solid rgba(179, 216, 255, .55);
  border-radius: 1rem;
  padding: .9rem 1rem 1rem;
  margin-bottom: .8rem;
}
.p1-block h4 {
  margin: 0 0 .6rem;
  font-size: .9rem;
  color: #0f172a;
  font-weight: 700;
}

/* base สำหรับคอลัมน์ในหัวข้อย่อย */
.p1-col {
  display: flex;
  flex-direction: column;
  gap: .4rem;
}

/* ทำให้รายการบางกลุ่มเป็น 2 คอลัมน์ (ใช้คู่กับ page1.js ที่กำหนด .p1-col-2col) */
.p1-col.p1-col-2col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}

/* checkbox ให้ชิดซ้าย */
.p1-col.p1-col-2col .p1-chk {
  justify-content: flex-start;
}

/* layout สองคอลัมน์ที่ใช้ที่อื่น */
.p1-two-cols {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}

/* แถว checkbox ให้ชิดซ้าย */
.p1-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
  font-size: .88rem;
  text-align: left;
}
.p1-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  margin-top: 3px;
  accent-color: #6366f1;
  cursor: pointer;
}
.p1-chk span {
  cursor: pointer;
}

/* input อื่นๆ */
.p1-other {
  width: 100%;
  margin-top: .35rem;
  border: 1px solid rgba(99, 102, 241, .35);
  border-radius: .65rem;
  padding: .5rem .7rem;
  font-size: .85rem;
  background: #fff;
}

.p1-indent {
  margin-left: 1.6rem;
  display: flex;
  gap: 1.2rem;
  flex-wrap: wrap;
}

/* ====== ส่วนที่ 4 อัปโหลดรูป ====== */
.p1-upload {
  border: 2px dashed rgba(21, 128, 61, .35);
  background: rgba(236, 253, 245, .55);
  border-radius: 1rem;
  padding: 1.25rem 1.25rem 1rem;
  text-align: center;
}
.p1-upload-inner p {
  margin: .35rem 0;
}
.p1-upload-icon {
  font-size: 2.4rem;
}
.btn-upload {
  background: #7c3aed;
  border: none;
  color: #fff;
  padding: .5rem 1.1rem;
  border-radius: .7rem;
  cursor: pointer;
  font-size: .85rem;
  margin-top: .5rem;
  transition: filter .1s;
}
.btn-upload:hover {
  filter: brightness(1.03);
}
.p1-upload-name {
  font-size: .75rem;
  margin-top: .4rem;
  color: #166534;
}
.p1-preview {
  margin-top: .7rem;
  max-width: 160px;
  border-radius: .7rem;
  box-shadow: 0 6px 14px rgba(15, 118, 110, .28);
}
.p1-upload.dragover {
  background: rgba(236, 253, 245, .9);
  border-color: rgba(22, 163, 74, 1);
}

/* ====== ปุ่มด้านล่าง ====== */
.p1-actions {
  position: static;           /* ไม่ลอยจอแล้ว */
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}
@media (max-width: 900px) {
  .p1-actions {
    flex-direction: column-reverse;
    align-items: stretch;
  }
}

.btn-primary {
  background: linear-gradient(125deg, #2563eb 0%, #7c3aed 80%);
  border: none;
  color: #fff;
  padding: .75rem 1.5rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 12px 20px rgba(45, 103, 255, .3);
}
.btn-primary:hover {
  filter: brightness(1.02);
}
.btn-danger {
  background: #ef4444;
  border: none;
  color: #fff;
  padding: .75rem 1.1rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 12px rgba(239, 68, 68, .25);
}
.btn-danger:hover {
  filter: brightness(1.02);
}

/* ====== ของหน้าอื่น (ตอนนี้ให้เป็นกล่องจางๆ ไว้ก่อน) ====== */
#page2 .card,
#page3 .card,
#page4 .card,
#page5 .card,
#page6 .card {
  background: #fff;
  border: 1px solid rgba(148, 163, 184, .25);
  border-radius: 1rem;
  padding: 1rem 1.1rem;
  margin-bottom: .6rem;
  box-shadow: 0 8px 12px rgba(15, 23, 42, .02);
}

/* ====== Responsive ====== */
@media (max-width: 900px) {
  .tabs {
    gap: .6rem;
  }
  .tabs button {
    border-radius: 1.5rem;
  }
  .p1-wrapper {
    padding: 1.1rem .8rem 5rem;
  }
}

/* ให้ select ในส่วนข้อมูลผู้ป่วยเหมือนช่องปกติ */
.p1-section select {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .45rem .7rem;
  background: #fff;
  font-size: .9rem;
  width: 100%;
  outline: none;
}

/* ====== ส่วนที่ 3 (ระยะเวลา) — พื้นหลังชมพู ====== */
.p1-section-onset {
  background: linear-gradient(135deg, #ffe0f3 0%, #fff 55%);
  border-color: rgba(236, 72, 153, 0.28);
}

.p1-section-onset .p1-sec-title {
  color: #a21caf;
}

/* ====== หน้า 2 ระบบอื่นๆ ====== */
.p2-wrapper {
  background: linear-gradient(140deg, #e0f2fe 0%, #fef3c7 40%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, .6);
  border-radius: 1.6rem;
  padding: 1.4rem 1.6rem 5rem;
  box-shadow: 0 14px 30px rgba(15, 23, 42, 0.04);
}

.p2-title {
  font-size: 1.35rem;
  font-weight: 700;
  color: #0f172a;
  margin-bottom: 1.1rem;
}

.p2-section {
  background: rgba(255, 255, 255, .75);
  border: 1px solid rgba(148, 163, 184, .2);
  border-radius: 1.1rem;
  padding: 1rem 1rem 1.2rem;
  margin-bottom: 1rem;
}

.p2-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #0f766e;
  margin: 0 0 .7rem;
}
.p2-sec-title.red { color: #b91c1c; }
.p2-sec-title.orange { color: #c05621; }
.p2-sec-title.teal { color: #115e59; }
.p2-sec-title.brown { color: #92400e; }
.p2-sec-title.indigo { color: #3730a3; }
.p2-sec-title.violet { color: #7c3aed; }

.p2-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: .6rem 1rem;
}

.p2-chk {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .9rem;
}
.p2-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
}

.p2-detail {
  border: 1px solid rgba(148, 163, 184, .4);
  border-radius: .7rem;
  padding: .4rem .6rem;
  font-size: .85rem;
  background: #fff;
}

.p2-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.2rem;
}
@media (max-width: 800px) {
  .p2-actions {
    flex-direction: column-reverse;
  }
}

/* ====== หน้า 2 ระบบอื่นๆ ====== */
.p2-wrapper {
  background: #ffffff;
  border-radius: 1.4rem;
  margin-top: 1rem;
  margin-bottom: 2.5rem;
  border: 1px solid rgba(148, 163, 184, 0.12);
  box-shadow: 0 14px 40px rgba(79, 70, 229, 0.04);
  padding: 1.4rem 1.3rem 1.6rem;
}

.p2-title {
  font-size: 1.35rem;
  margin-bottom: 1.1rem;
  color: #1f2937;
  font-weight: 700;
}

.p2-section {
  background: linear-gradient(90deg, rgba(255, 247, 237, 0.7), rgba(248, 250, 252, 0));
  border-radius: 1.1rem;
  padding: 1rem 1rem 1rem;
  margin-bottom: 1rem;
}

.p2-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #b91c1c;
  margin-bottom: .8rem;
}

.p2-sec-title.purple {
  color: #6d28d9;
}

.p2-block {
  background: rgba(248, 250, 252, .6);
  border: 1px solid rgba(226, 232, 240, .6);
  border-radius: .9rem;
  padding: .8rem .8rem 1rem;
  margin-bottom: .85rem;
}

.p2-block-title {
  margin: 0 0 .7rem;
  font-weight: 600;
  color: #991b1b;
}

.p2-list {
  display: flex;
  flex-direction: column;
  gap: .4rem;
}

.p2-item {
  background: #fff;
  border-radius: .7rem;
  padding: .55rem .5rem .45rem;
  display: flex;
  align-items: center;
  gap: .65rem;
  border: 1px solid rgba(148, 163, 184, .2);
}

.p2-item input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
  cursor: pointer;
}

.p2-detail {
  margin-top: .25rem;
  margin-left: 2.1rem;
  border: 1px solid rgba(99, 102, 241, .35);
  border-radius: .55rem;
  padding: .4rem .55rem;
  font-size: .85rem;
  background: #fff;
}

.p2-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.4rem;
}

@media (max-width: 900px) {
  .p2-actions {
    flex-direction: column-reverse;
  }
}

/* ====== หน้า 2 ====== */
.p2-wrapper {
  background: #fff;
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.4rem;
  padding: 1.5rem 1.4rem 2rem;
  box-shadow: 0 10px 25px rgba(15,23,42,.05);
  background: linear-gradient(180deg, #fff 0%, #fef3f2 100%);
}
.p2-section {
  background: rgba(255,255,255,.7);
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.1rem;
  padding: 1.2rem 1rem 1rem;
  margin-bottom: 1.1rem;
}
.p2-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #7c2d12;
  margin-bottom: .9rem;
}
.p2-title.purple {
  color: #6d28d9;
}
.p2-block {
  background: #fff;
  border-radius: .9rem;
  padding: .6rem .6rem .4rem;
  border: 1px solid rgba(148,163,184,.08);
  margin-bottom: .65rem;
}
.p2-block h4 {
  margin: 0 0 .5rem;
  color: #be123c;
  font-size: .92rem;
}
.p2-row {
  background: #f8fafc;
  border-radius: .7rem;
  padding: .5rem .7rem .6rem;
  margin-bottom: .5rem;
}
.p2-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
}
.p2-detail {
  margin-top: .4rem;
  width: 100%;
  border: 1px solid rgba(124,58,237,.35);
  border-radius: .6rem;
  padding: .4rem .55rem;
  font-size: .85rem;
  background: #fff;
}

/* ====== หน้า 3 Lab ====== */
.p3-wrapper {
  background: linear-gradient(135deg, #d1fae5 0%, #ecfdf3 35%, #ffffff 100%);
  border: 1px solid rgba(16, 185, 129, 0.25);
  border-radius: 1.4rem;
  padding: 1.4rem 1.5rem 3.9rem;
  box-shadow: 0 14px 35px rgba(13, 148, 136, 0.08);
}

.p3-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #065f46;
  display: flex;
  gap: .6rem;
  align-items: center;
  margin-bottom: .35rem;
}
.p3-title .icon {
  font-size: 1.4rem;
}

.p3-subtitle {
  margin: 0 0 1.1rem;
  color: #047857;
  font-size: .9rem;
}

.p3-sections {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.p3-section {
  background: #fff;
  border: 1px solid rgba(45, 212, 191, 0.25);
  border-radius: 1.1rem;
  padding: 1.05rem 1.05rem 1.1rem;
  box-shadow: 0 8px 16px rgba(13, 148, 136, 0.05);
}

.p3-section-header {
  display: flex;
  align-items: center;
  gap: .55rem;
  margin-bottom: .85rem;
}
.p3-section-header h3 {
  margin: 0;
  font-size: 1.05rem;
  color: #064e3b;
}
.p3-section-icon {
  font-size: 1.4rem;
}

.p3-rows {
  display: flex;
  flex-direction: column;
  gap: .65rem;
}

.p3-row {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem 1rem;
  align-items: center;
  background: rgba(236, 253, 245, .4);
  border: 1px solid rgba(16, 185, 129, .12);
  border-radius: .9rem;
  padding: .55rem .65rem .6rem;
}

.p3-row-check {
  display: flex;
  gap: .55rem;
  align-items: center;
  min-width: 200px;
  font-weight: 500;
  color: #065f46;
}
.p3-row-check input {
  width: 17px;
  height: 17px;
  accent-color: #10b981;
}

.p3-row-inputs {
  display: flex;
  gap: .4rem;
  align-items: center;
  flex: 1 1 auto;
  min-width: 280px;
}
.p3-val,
.p3-detail {
  border: 1px solid rgba(45, 212, 191, 0.55);
  border-radius: .6rem;
  padding: .35rem .55rem;
  font-size: .83rem;
  outline: none;
}
.p3-val {
  width: 130px;
  background: #fff;
}
.p3-detail {
  flex: 1 1 auto;
  background: #fff;
}
.p3-val:focus,
.p3-detail:focus {
  box-shadow: 0 0 0 3px rgba(45, 212, 191, .18);
}
.p3-unit {
  font-size: .8rem;
  color: #047857;
  white-space: nowrap;
}

.p3-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
}
@media (max-width: 880px) {
  .p3-row {
    flex-direction: column;
    align-items: flex-start;
  }
  .p3-row-inputs {
    width: 100%;
  }
  .p3-actions {
    flex-direction: column;
  }
}
