/* ====== รีเซ็ตเล็กน้อย ====== */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Tahoma", sans-serif;
  background: #f3f4ff;
  color: #1f2937;
  min-height: 100vh;
}

/* ====== ส่วนหัวบนสุด ====== */
.topbar {
  position: relative;
  background: linear-gradient(120deg, #7c3aed 0%, #ec4899 50%, #fb7185 100%);
  color: #fff;
  padding: 2.6rem 1.5rem 3.3rem;
  text-align: center;
  overflow: hidden;
}

/* ฟองอากาศลอย */
.topbar::before,
.topbar::after {
  content: "";
  position: absolute;
  width: 140px;
  height: 140px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.12);
  animation: bubble 6s infinite ease-in-out;
}
.topbar::before {
  top: -40px;
  left: 12%;
}
.topbar::after {
  bottom: -50px;
  right: 18%;
  animation-delay: 1.2s;
}

@keyframes bubble {
  0% { transform: translateY(0); opacity: .8; }
  50% { transform: translateY(10px); opacity: .4; }
  100% { transform: translateY(0); opacity: .8; }
}

.topbar h1 {
  font-size: clamp(2.1rem, 3vw, 2.7rem);
  margin: 0;
  font-weight: 700;
  letter-spacing: 0.01em;
}

.topbar p {
  margin-top: 1rem;
  margin-bottom: 0;
  font-size: 1.05rem;
}

.topbar .hospital-badge {
  display: inline-block;
  margin-top: 1rem;
  background: rgba(255, 255, 255, 0.25);
  padding: .5rem 1.8rem;
  border-radius: 999px;
  font-weight: 500;
  backdrop-filter: blur(6px);
}

/* ====== เมนูแท็บ ====== */
.tabs {
  display: flex;
  gap: 1rem;
  /* ดันปุ่มให้ลงมาจากขอบบนหน่อย */
  padding: 0.6rem 1.5rem 1rem;
  background: #fff;
  box-shadow: 0 3px 10px rgba(124, 58, 237, 0.08);
  overflow-x: auto;
  align-items: center; /* ให้ปุ่มอยู่กลางแนวตั้ง */
}

.tabs::-webkit-scrollbar {
  height: 7px;
}
.tabs::-webkit-scrollbar-track {
  background: #e5e7eb;
  border-radius: 999px;
}
.tabs::-webkit-scrollbar-thumb {
  background: #9333ea;
  border-radius: 999px;
}

.tabs button {
  border: none;
  background: #f1f2ff;
  padding: .6rem 1.4rem .65rem;
  border-radius: 999px;         /* ให้โค้งครบ */
  font-size: .95rem;
  font-weight: 500;
  color: #4b5563;
  cursor: pointer;
  flex: 0 0 auto;
  transition: all .15s ease-in-out;
  border: 1px solid rgba(147, 51, 234, 0);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .4rem;
  min-width: 130px;
  text-align: center;
}


.tabs button:hover {
  background: #e2e7ff;
}

.tabs button.active {
  background: #fff;
  color: #1f2937;
  border: 1px solid rgba(147, 51, 234, .35);
  box-shadow: 0 8px 18px rgba(147, 51, 234, .15);
}

/* ปุ่มที่ยังไม่ active ให้เป็นสีต่างกัน */
.tabs button:nth-child(1):not(.active) {
  background: rgba(124, 58, 237, 0.12);
  color: #4c1d95;
}
.tabs button:nth-child(2):not(.active) {
  background: rgba(59, 130, 246, 0.12);
  color: #1d4ed8;
}
.tabs button:nth-child(3):not(.active) {
  background: rgba(45, 212, 191, 0.14);
  color: #0f766e;
}
.tabs button:nth-child(4):not(.active) {
  background: rgba(251, 146, 60, 0.14);
  color: #c05621;
}
.tabs button:nth-child(5):not(.active) {
  background: rgba(244, 63, 94, 0.12);
  color: #be123c;
}
.tabs button:nth-child(6):not(.active) {
  background: rgba(99, 102, 241, 0.12);
  color: #3730a3;
}

/* ตอน active ให้เป็นเหมือนเดิมคือขาว + ขอบ + เงา */
.tabs button.active {
  background: #fff;
  color: #1f2937;
  border: 1px solid rgba(147, 51, 234, .35);
  box-shadow: 0 8px 18px rgba(147, 51, 234, .15);
}

/* ====== หน้า (6 หน้า) ====== */
.page {
  display: none;
  max-width: 1180px;
  margin: 1.2rem auto 4.5rem;
  padding: 0 1rem;
}
.page.visible {
  display: block;
}

/* ====== หน้า 1 โครงรวม ====== */
.p1-wrapper {
  background: linear-gradient(135deg, #ffe3d0 0%, #eef5ff 50%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, .4);
  border-radius: 1.6rem;
  padding: 1.6rem 1.9rem 6rem;
  box-shadow: 0 14px 30px rgba(124, 58, 237, 0.08);
  position: relative;
}

.p1-title {
  font-size: 1.4rem;
  margin-bottom: 1.25rem;
  color: #312e81;
  font-weight: 700;
}

/* ====== ส่วนหลักของหน้า 1 (4 ส่วน) ====== */
.p1-section {
  background: rgba(255, 255, 255, .65);
  border: 1px solid rgba(148, 163, 184, .2);
  border-radius: 1.2rem;
  padding: 1.2rem 1.05rem 1.2rem;
  margin-bottom: 1.1rem;
  backdrop-filter: blur(2px);
}

.p1-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: 1.05rem;
  font-weight: 700;
  margin: 0 0 1rem;
  color: #312e81;
}
.p1-sec-title .icon {
  font-size: 1.3rem;
}
.p1-sec-title.blue {
  color: #0f766e;
}
.p1-sec-title.purple {
  color: #6d28d9;
}
.p1-sec-title.green {
  color: #166534;
}

/* กริดข้อมูลผู้ป่วย */
.p1-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: 1rem;
}

.p1-grid label,
.p1-block label {
  display: flex;
  flex-direction: column;
  gap: .3rem;
  font-size: .9rem;
  color: #374151;
}

.p1-grid input,
.p1-grid textarea,
.p1-block input,
.p1-block select,
#p1_onset_select,
#p1_onset_other {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .55rem .7rem;
  font-size: .9rem;
  outline: none;
  background: #fff;
  transition: border .15s;
}

.p1-grid input:focus,
.p1-grid textarea:focus,
.p1-block input:focus,
.p1-block select:focus,
#p1_onset_select:focus,
#p1_onset_other:focus {
  border: 1px solid rgba(124, 58, 237, .7);
  box-shadow: 0 0 0 3px rgba(124, 58, 237, .12);
}

.p1-grid textarea {
  min-height: 70px;
  resize: vertical;
}

.p1-col-2 {
  grid-column: span 2;
}

/* ====== บล็อกย่อย (1.1 – 1.21) ====== */
.p1-block {
  background: rgba(238, 250, 255, .6);
  border: 1px solid rgba(179, 216, 255, .55);
  border-radius: 1rem;
  padding: .9rem 1rem 1rem;
  margin-bottom: .8rem;
}
.p1-block h4 {
  margin: 0 0 .6rem;
  font-size: .9rem;
  color: #0f172a;
  font-weight: 700;
}

/* base สำหรับคอลัมน์ในหัวข้อย่อย */
.p1-col {
  display: flex;
  flex-direction: column;
  gap: .4rem;
}

/* ทำให้รายการบางกลุ่มเป็น 2 คอลัมน์ (ใช้คู่กับ page1.js ที่กำหนด .p1-col-2col) */
.p1-col.p1-col-2col {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}

/* checkbox ให้ชิดซ้าย */
.p1-col.p1-col-2col .p1-chk {
  justify-content: flex-start;
}

/* layout สองคอลัมน์ที่ใช้ที่อื่น */
.p1-two-cols {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
  gap: .4rem .9rem;
  align-items: flex-start;
  justify-items: start;
}

/* แถว checkbox ให้ชิดซ้าย */
.p1-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
  font-size: .88rem;
  text-align: left;
}
.p1-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  margin-top: 3px;
  accent-color: #6366f1;
  cursor: pointer;
}
.p1-chk span {
  cursor: pointer;
}

/* input อื่นๆ */
.p1-other {
  width: 100%;
  margin-top: .35rem;
  border: 1px solid rgba(99, 102, 241, .35);
  border-radius: .65rem;
  padding: .5rem .7rem;
  font-size: .85rem;
  background: #fff;
}

.p1-indent {
  margin-left: 1.6rem;
  display: flex;
  gap: 1.2rem;
  flex-wrap: wrap;
}

/* ====== ส่วนที่ 4 อัปโหลดรูป ====== */
.p1-upload {
  border: 2px dashed rgba(21, 128, 61, .35);
  background: rgba(236, 253, 245, .55);
  border-radius: 1rem;
  padding: 1.25rem 1.25rem 1rem;
  text-align: center;
}
.p1-upload-inner p {
  margin: .35rem 0;
}
.p1-upload-icon {
  font-size: 2.4rem;
}
.btn-upload {
  background: #7c3aed;
  border: none;
  color: #fff;
  padding: .5rem 1.1rem;
  border-radius: .7rem;
  cursor: pointer;
  font-size: .85rem;
  margin-top: .5rem;
  transition: filter .1s;
}
.btn-upload:hover {
  filter: brightness(1.03);
}
.p1-upload-name {
  font-size: .75rem;
  margin-top: .4rem;
  color: #166534;
}
.p1-preview {
  margin-top: .7rem;
  max-width: 160px;
  border-radius: .7rem;
  box-shadow: 0 6px 14px rgba(15, 118, 110, .28);
}
.p1-upload.dragover {
  background: rgba(236, 253, 245, .9);
  border-color: rgba(22, 163, 74, 1);
}

/* ====== ปุ่มด้านล่าง ====== */
.p1-actions {
  position: static;           /* ไม่ลอยจอแล้ว */
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}
@media (max-width: 900px) {
  .p1-actions {
    flex-direction: column-reverse;
    align-items: stretch;
  }
}

.btn-primary {
  background: linear-gradient(125deg, #2563eb 0%, #7c3aed 80%);
  border: none;
  color: #fff;
  padding: .75rem 1.5rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 12px 20px rgba(45, 103, 255, .3);
}
.btn-primary:hover {
  filter: brightness(1.02);
}
.btn-danger {
  background: #ef4444;
  border: none;
  color: #fff;
  padding: .75rem 1.1rem;
  border-radius: .85rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 12px rgba(239, 68, 68, .25);
}
.btn-danger:hover {
  filter: brightness(1.02);
}

/* ====== ของหน้าอื่น (ตอนนี้ให้เป็นกล่องจางๆ ไว้ก่อน) ====== */
#page2 .card,
#page3 .card,
#page4 .card,
#page5 .card,
#page6 .card {
  background: #fff;
  border: 1px solid rgba(148, 163, 184, .25);
  border-radius: 1rem;
  padding: 1rem 1.1rem;
  margin-bottom: .6rem;
  box-shadow: 0 8px 12px rgba(15, 23, 42, .02);
}

/* ====== Responsive ====== */
@media (max-width: 900px) {
  .tabs {
    gap: .6rem;
  }
  .tabs button {
    border-radius: 1.5rem;
  }
  .p1-wrapper {
    padding: 1.1rem .8rem 5rem;
  }
}

/* ให้ select ในส่วนข้อมูลผู้ป่วยเหมือนช่องปกติ */
.p1-section select {
  border: 1px solid rgba(173, 139, 255, 0.4);
  border-radius: .8rem;
  padding: .45rem .7rem;
  background: #fff;
  font-size: .9rem;
  width: 100%;
  outline: none;
}

/* ====== ส่วนที่ 3 (ระยะเวลา) — พื้นหลังชมพู ====== */
.p1-section-onset {
  background: linear-gradient(135deg, #ffe0f3 0%, #fff 55%);
  border-color: rgba(236, 72, 153, 0.28);
}

.p1-section-onset .p1-sec-title {
  color: #a21caf;
}

/* ====== หน้า 2 ระบบอื่นๆ ====== */
.p2-wrapper {
  background: linear-gradient(140deg, #e0f2fe 0%, #fef3c7 40%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, .6);
  border-radius: 1.6rem;
  padding: 1.4rem 1.6rem 5rem;
  box-shadow: 0 14px 30px rgba(15, 23, 42, 0.04);
}

.p2-title {
  font-size: 1.35rem;
  font-weight: 700;
  color: #0f172a;
  margin-bottom: 1.1rem;
}

.p2-section {
  background: rgba(255, 255, 255, .75);
  border: 1px solid rgba(148, 163, 184, .2);
  border-radius: 1.1rem;
  padding: 1rem 1rem 1.2rem;
  margin-bottom: 1rem;
}

.p2-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #0f766e;
  margin: 0 0 .7rem;
}
.p2-sec-title.red { color: #b91c1c; }
.p2-sec-title.orange { color: #c05621; }
.p2-sec-title.teal { color: #115e59; }
.p2-sec-title.brown { color: #92400e; }
.p2-sec-title.indigo { color: #3730a3; }
.p2-sec-title.violet { color: #7c3aed; }

.p2-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: .6rem 1rem;
}

.p2-chk {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .9rem;
}
.p2-chk input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
}

.p2-detail {
  border: 1px solid rgba(148, 163, 184, .4);
  border-radius: .7rem;
  padding: .4rem .6rem;
  font-size: .85rem;
  background: #fff;
}

.p2-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.2rem;
}
@media (max-width: 800px) {
  .p2-actions {
    flex-direction: column-reverse;
  }
}

/* ====== หน้า 2 ระบบอื่นๆ ====== */
.p2-wrapper {
  background: #ffffff;
  border-radius: 1.4rem;
  margin-top: 1rem;
  margin-bottom: 2.5rem;
  border: 1px solid rgba(148, 163, 184, 0.12);
  box-shadow: 0 14px 40px rgba(79, 70, 229, 0.04);
  padding: 1.4rem 1.3rem 1.6rem;
}

.p2-title {
  font-size: 1.35rem;
  margin-bottom: 1.1rem;
  color: #1f2937;
  font-weight: 700;
}

.p2-section {
  background: linear-gradient(90deg, rgba(255, 247, 237, 0.7), rgba(248, 250, 252, 0));
  border-radius: 1.1rem;
  padding: 1rem 1rem 1rem;
  margin-bottom: 1rem;
}

.p2-sec-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #b91c1c;
  margin-bottom: .8rem;
}

.p2-sec-title.purple {
  color: #6d28d9;
}

.p2-block {
  background: rgba(248, 250, 252, .6);
  border: 1px solid rgba(226, 232, 240, .6);
  border-radius: .9rem;
  padding: .8rem .8rem 1rem;
  margin-bottom: .85rem;
}

.p2-block-title {
  margin: 0 0 .7rem;
  font-weight: 600;
  color: #991b1b;
}

.p2-list {
  display: flex;
  flex-direction: column;
  gap: .4rem;
}

.p2-item {
  background: #fff;
  border-radius: .7rem;
  padding: .55rem .5rem .45rem;
  display: flex;
  align-items: center;
  gap: .65rem;
  border: 1px solid rgba(148, 163, 184, .2);
}

.p2-item input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #6366f1;
  cursor: pointer;
}

.p2-detail {
  margin-top: .25rem;
  margin-left: 2.1rem;
  border: 1px solid rgba(99, 102, 241, .35);
  border-radius: .55rem;
  padding: .4rem .55rem;
  font-size: .85rem;
  background: #fff;
}

.p2-actions {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  margin-top: 1.4rem;
}

@media (max-width: 900px) {
  .p2-actions {
    flex-direction: column-reverse;
  }
}

/* ====== หน้า 2 ====== */
.p2-wrapper {
  background: #fff;
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.4rem;
  padding: 1.5rem 1.4rem 2rem;
  box-shadow: 0 10px 25px rgba(15,23,42,.05);
  background: linear-gradient(180deg, #fff 0%, #fef3f2 100%);
}
.p2-section {
  background: rgba(255,255,255,.7);
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 1.1rem;
  padding: 1.2rem 1rem 1rem;
  margin-bottom: 1.1rem;
}
.p2-title {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  color: #7c2d12;
  margin-bottom: .9rem;
}
.p2-title.purple {
  color: #6d28d9;
}
.p2-block {
  background: #fff;
  border-radius: .9rem;
  padding: .6rem .6rem .4rem;
  border: 1px solid rgba(148,163,184,.08);
  margin-bottom: .65rem;
}
.p2-block h4 {
  margin: 0 0 .5rem;
  color: #be123c;
  font-size: .92rem;
}
.p2-row {
  background: #f8fafc;
  border-radius: .7rem;
  padding: .5rem .7rem .6rem;
  margin-bottom: .5rem;
}
.p2-chk {
  display: flex;
  align-items: flex-start;
  gap: .55rem;
}
.p2-detail {
  margin-top: .4rem;
  width: 100%;
  border: 1px solid rgba(124,58,237,.35);
  border-radius: .6rem;
  padding: .4rem .55rem;
  font-size: .85rem;
  background: #fff;
}

/* ====== หน้า 3 Lab ====== */
.p3-wrapper {
  background: linear-gradient(135deg, #d1fae5 0%, #ecfdf3 35%, #ffffff 100%);
  border: 1px solid rgba(16, 185, 129, 0.25);
  border-radius: 1.4rem;
  padding: 1.4rem 1.5rem 3.9rem;
  box-shadow: 0 14px 35px rgba(13, 148, 136, 0.08);
}

.p3-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #065f46;
  display: flex;
  gap: .6rem;
  align-items: center;
  margin-bottom: .35rem;
}
.p3-title .icon {
  font-size: 1.4rem;
}

.p3-subtitle {
  margin: 0 0 1.1rem;
  color: #047857;
  font-size: .9rem;
}

.p3-sections {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.p3-section {
  background: #fff;
  border: 1px solid rgba(45, 212, 191, 0.25);
  border-radius: 1.1rem;
  padding: 1.05rem 1.05rem 1.1rem;
  box-shadow: 0 8px 16px rgba(13, 148, 136, 0.05);
}

.p3-section-header {
  display: flex;
  align-items: center;
  gap: .55rem;
  margin-bottom: .85rem;
}
.p3-section-header h3 {
  margin: 0;
  font-size: 1.05rem;
  color: #064e3b;
}
.p3-section-icon {
  font-size: 1.4rem;
}

.p3-rows {
  display: flex;
  flex-direction: column;
  gap: .65rem;
}

.p3-row {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem 1rem;
  align-items: center;
  background: rgba(236, 253, 245, .4);
  border: 1px solid rgba(16, 185, 129, .12);
  border-radius: .9rem;
  padding: .55rem .65rem .6rem;
}

.p3-row-check {
  display: flex;
  gap: .55rem;
  align-items: center;
  min-width: 200px;
  font-weight: 500;
  color: #065f46;
}
.p3-row-check input {
  width: 17px;
  height: 17px;
  accent-color: #10b981;
}

.p3-row-inputs {
  display: flex;
  gap: .4rem;
  align-items: center;
  flex: 1 1 auto;
  min-width: 280px;
}
.p3-val,
.p3-detail {
  border: 1px solid rgba(45, 212, 191, 0.55);
  border-radius: .6rem;
  padding: .35rem .55rem;
  font-size: .83rem;
  outline: none;
}
.p3-val {
  width: 130px;
  background: #fff;
}
.p3-detail {
  flex: 1 1 auto;
  background: #fff;
}
.p3-val:focus,
.p3-detail:focus {
  box-shadow: 0 0 0 3px rgba(45, 212, 191, .18);
}
.p3-unit {
  font-size: .8rem;
  color: #047857;
  white-space: nowrap;
}

.p3-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
}
@media (max-width: 880px) {
  .p3-row {
    flex-direction: column;
    align-items: flex-start;
  }
  .p3-row-inputs {
    width: 100%;
  }
  .p3-actions {
    flex-direction: column;
  }
}

/* ====== หน้า 4 Naranjo (ชมพู-ส้ม วิ๊งๆ) ====== */
.p4-wrapper {
  background: radial-gradient(circle at top, #ffe1f2 0%, #ffd1aa 40%, #fff 70%);
  border: 1px solid rgba(255, 149, 189, 0.22);
  border-radius: 1.2rem;
  padding: 1.3rem 1.3rem 5.5rem;
  box-shadow: 0 20px 40px rgba(245, 111, 149, 0.08);
  position: relative;
  overflow: hidden;
}

/* ฟองแสงวิ๊งๆ ด้านหลัง */
.p4-wrapper::before,
.p4-wrapper::after {
  content: "";
  position: absolute;
  inset: -80px -30px auto;
  height: 220px;
  background:
    radial-gradient(circle, rgba(255,255,255,.95) 0%, rgba(255,255,255,0) 55%) 10% 10% / 140px 140px no-repeat,
    radial-gradient(circle, rgba(255,232,249,.8) 0%, rgba(255,232,249,0) 65%) 60% 0% / 190px 190px no-repeat,
    radial-gradient(circle, rgba(255,166,137,.5) 0%, rgba(255,166,137,0) 65%) 90% 35% / 140px 140px no-repeat;
  pointer-events: none;
}
.p4-wrapper::after {
  inset: auto -40px -90px;
  height: 180px;
  filter: blur(2px);
  opacity: .6;
}

/* หัวข้อบนสุด */
.p4-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
  margin-bottom: 1rem;
  position: relative;
  z-index: 5;
}
.p4-title {
  font-size: 1.2rem;
  font-weight: 700;
  color: #7a215f;
  display: flex;
  gap: .4rem;
  align-items: center;
}

/* ปุ่มเพิ่มยาตัวใหม่ */
.p4-add-btn {
  background: linear-gradient(120deg, #22c55e 0%, #16a34a 40%, #22c55e 80%);
  border: none;
  color: #fff;
  padding: .55rem 1.1rem;
  border-radius: .9rem;
  font-weight: 600;
  box-shadow: 0 10px 25px rgba(34, 197, 94, .35);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .4rem;
}

/* กล่องยาทีละตัว */
.p4-drug-card {
  background: rgba(255, 255, 255, .9);
  border: 1px solid rgba(255, 171, 196, 0.35);
  border-radius: 1rem;
  padding: 1rem 1rem 1.1rem;
  margin-bottom: 1rem;
  position: relative;
  z-index: 3;
  backdrop-filter: blur(3px);
  box-shadow: 0 12px 18px rgba(255, 172, 190, 0.07);
}
.p4-drug-title {
  font-weight: 700;
  color: #3f2350;
  margin-bottom: .45rem;
}
.p4-drug-name {
  width: 100%;
  border: 1px solid rgba(255, 140, 156, 0.35);
  border-radius: .7rem;
  padding: .45rem .55rem;
  font-size: .9rem;
  margin-bottom: .8rem;
}

/* บล็อกคำถาม */
.p4-qblock {
  background: rgba(255, 242, 243, .85);
  border: 1px solid rgba(255, 149, 159, .18);
  border-radius: .8rem;
  padding: .6rem .55rem .55rem;
  margin-bottom: .6rem;
}
.p4-qblock h4 {
  margin: 0 0 .4rem;
  font-size: .9rem;
  color: #7a215f;
}

.p4-ans-row {
  display: flex;
  gap: .45rem;
  flex-wrap: wrap;
}

/* ปุ่มตัวเลือก (ใช่/ไม่ใช่/ไม่ทราบ) */
.p4-choice {
  border: 1px solid rgba(124, 58, 237, 0.12);
  background: #fff;
  border-radius: .6rem;
  padding: .35rem .8rem .4rem;
  font-size: .83rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .3rem;
  transition: transform .08s ease-out, box-shadow .08s ease-out;
}
.p4-choice:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(238, 113, 136, .1);
}

/* ตอนเลือก */
.p4-choice.is-positive {
  background: radial-gradient(circle, #22c55e 0%, #16a34a 55%, #15803d 100%);
  color: #fff;
  border: 1px solid rgba(34,197,94,.9);
  box-shadow: 0 10px 22px rgba(34, 197, 94, .35);
}
.p4-choice.is-negative {
  background: radial-gradient(circle, #f97316 0%, #ea580c 65%);
  color: #fff;
  border: 1px solid rgba(249, 115, 22, .68);
}
.p4-choice.is-unknown {
  background: radial-gradient(circle, #f973c2 0%, #db2777 75%);
  color: #fff;
  border: 1px solid rgba(236, 72, 153, .65);
}

/* กล่องสรุปคะแนน */
.p4-summary {
  background: rgba(255, 255, 255, .92);
  border: 1px solid rgba(255, 180, 192, .35);
  border-radius: 1rem;
  padding: .8rem .8rem 1rem;
  margin-top: 1rem;
  box-shadow: 0 10px 18px rgba(255, 145, 169, 0.08);
}
.p4-score {
  font-size: 1.6rem;
  font-weight: 700;
  color: #7a215f;
}

/* หน้า 5 กลิตเตอร์วิบวับ */
.p5-glitter-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.65) 0, rgba(255,255,255,0) 40%),
    radial-gradient(circle, rgba(255,255,255,.45) 0, rgba(255,255,255,0) 45%);
  background-size: 220px 220px, 160px 160px;
  mix-blend-mode: screen;
  opacity: .6;
  animation: p5sparkle 9s linear infinite;
}

@keyframes p5sparkle {
  0%   { background-position: 0 0, 50px 80px; opacity:.7; }
  50%  { background-position: 160px 120px, 120px 10px; opacity:.3; }
  100% { background-position: 0 0, 50px 80px; opacity:.7; }
}

/* กันไว้ถ้าอยากใช้ container */
.p5-wrapper {
  position: relative;
}
/* ===== หน้า 5: Timeline ===== */
.tl-wrapper{display:flex;flex-direction:column;gap:16px}
.tl-section{background:linear-gradient(180deg,#ffffff,rgba(255,255,255,.96));border:1px solid rgba(0,0,0,.06);border-radius:14px;padding:14px}
.tl-bg-soft{background:linear-gradient(180deg,#fff,#f7fffb)}
.tl-bg-soft-red{background:linear-gradient(180deg,#fff,#fff4f4)}
.tl-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.tl-head h2{margin:0}
.tl-card{position:relative;border:1px solid rgba(0,0,0,.08);border-radius:12px;padding:12px;margin-bottom:10px;background:#fff}
.tl-row2{display:flex;gap:10px;align-items:center}
.tl-row2 label{min-width:56px}
.tl-grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px}
.tl-inline{display:flex;gap:8px}
.tl-note{opacity:.6;padding:8px 4px}
.tl-del{position:absolute;right:10px;bottom:10px;background:#eee;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}

.tl-actions-under-adr{margin-top:8px;display:flex;justify-content:flex-start}

.tl-scroll{overflow-x:auto;overflow-y:hidden;border:1px dashed rgba(0,0,0,.08);border-radius:12px;background:linear-gradient(180deg,#fff,rgba(255,255,255,.9));padding:10px}
.tl-scroll.hidden{display:none}
.tl-axis{position:relative;height:28px}
.tl-ticks{position:relative;height:28px}
.tl-tick{position:absolute;top:0;height:28px;line-height:28px;font-size:13px;color:#111}

.tl-canvas{position:relative;min-height:120px}
.tl-row{display:grid;grid-template-columns:180px 1fr;align-items:center;gap:6px;position:relative;height:56px}
.tl-ylabel{justify-self:start;color:#0d9488;font-weight:700}
.tl-track{position:relative;height:40px}

.tl-bar{position:absolute;top:6px;height:28px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#111; /* ตัวหนังสือดำ ตามที่สั่ง */ }
.tl-bar.drug{background:#0ea5e9;box-shadow:0 8px 18px rgba(14,165,233,.28)}
.tl-bar.adr{background:#ef4444;box-shadow:0 8px 18px rgba(239,68,68,.28)}

.tl-bottom-actions{display:flex;flex-direction:column;gap:10px;margin-top:6px}
.btn-green-solid{background:#16a34a;color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:800}
.btn-red-solid{background:#ef4444;color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:800}
.btn-blue-solid{background:#2563eb;color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:800}
.btn-purple-solid{background:#5b46f5;color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:800}

/* ให้สามปุ่มท้ายหน้า “อยู่กับที่ท้าย section” ไม่ลอย */
.tl-bottom-actions{position:sticky;bottom:0;background:linear-gradient(180deg,rgba(255,255,255,.0),rgba(255,255,255,.9));padding-bottom:8px}

/* พิมพ์: โฟกัส timeline ให้พอดีหน้า */
@media print{
  .topbar, .tabs, .tl-head, .tl-actions-under-adr, .tl-bottom-actions, .tl-card, .tl-note { display:none !important; }
  #page5{padding:0;margin:0}
  .tl-section{border:none;padding:6px}
  .tl-scroll{overflow:visible}
  .tl-canvas, .tl-ticks{transform:scale(.92);transform-origin:top left}
}
/* =========================
   PAGE 5 — TIMELINE (fix)
   ========================= */

/* กล่องหลักของหน้า 5 ให้มีพาสเทลและขอบโค้ง */
#page5 .p5-wrapper {
  background: radial-gradient(circle at 0% 0%, #fff7ff 0%, #fef9e7 55%, #ffffff 95%);
  border: 1px solid rgba(248, 113, 113, 0.05);
  border-radius: 1.4rem;
  box-shadow: 0 14px 35px rgba(148, 163, 184, 0.12);
  position: relative;
  overflow: hidden;
}

/* เลเยอร์กลิตเตอร์วิบวับ */
#page5 .p5-glitter-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.9) 0, rgba(255,255,255,0) 35%),
    radial-gradient(circle, rgba(255,219,241,.75) 0, rgba(255,219,241,0) 50%),
    radial-gradient(circle, rgba(254,240,138,.6) 0, rgba(254,240,138,0) 40%);
  background-size: 260px 260px, 240px 240px, 180px 180px;
  mix-blend-mode: screen;
  animation: p5sparkle 11s linear infinite;
  opacity: .7;
}
@keyframes p5sparkle {
  0%   { background-position: 0 0, 60px 60px, 140px 10px; opacity:.8; }
  50%  { background-position: 140px 120px, 0 80px, 20px 70px; opacity:.35; }
  100% { background-position: 0 0, 60px 60px, 140px 10px; opacity:.8; }
}

/* การ์ดส่วนยากับ ADR */
#page5 .tl-section {
  background: rgba(255,255,255,.9);
  border: 1px solid rgba(148, 163, 184, .16);
  border-radius: 1.1rem;
  padding: 1rem 1rem 1.1rem;
  margin-bottom: 1rem;
  box-shadow: 0 10px 25px rgba(15, 23, 42, .03);
  position: relative;
  z-index: 3;
}

/* การ์ดแต่ละรายการ */
#page5 .tl-card {
  background: rgba(255,255,255,1);
  border: 1px solid rgba(148,163,184,.12);
  border-radius: 1rem;
  padding: 0.75rem 0.9rem 1rem;
  margin-bottom: .65rem;
  box-shadow: 0 10px 16px rgba(148,163,184,.03);
}

/* หัวข้อ “ยา / ADR / Visual Timeline” */
#page5 .tl-head h2 {
  font-size: 1.08rem;
  font-weight: 700;
  margin: 0;
}

/* ปุ่มบนขวา 2 อัน (เพิ่มยา, เพิ่ม ADR) */
#page5 #tl-add-drug {
  background: #16a34a;
  border: none;
  color: #fff;
  border-radius: .9rem;
  padding: .5rem 1.05rem;
  font-weight: 700;
  box-shadow: 0 10px 20px rgba(22,163,74,.25);
  cursor: pointer;
}
#page5 #tl-add-adr {
  background: #ef4444;
  border: none;
  color: #fff;
  border-radius: .9rem;
  padding: .5rem 1.05rem;
  font-weight: 700;
  box-shadow: 0 10px 20px rgba(239,68,68,.25);
  cursor: pointer;
}

/* ปุ่มสร้าง Timeline ใต้ ADR */
#page5 #tl-build {
  border-radius: .75rem;
  gap: .4rem;
  box-shadow: 0 12px 20px rgba(37,99,235,.25);
}

/* พื้นที่เลื่อน timeline */
#page5 .tl-scroll {
  background: linear-gradient(180deg,#ffffff 0%, rgba(255,255,255,.95) 100%);
  border: 1px solid rgba(148,163,184,.12);
  border-radius: 1rem;
  overflow-x: auto;
  overflow-y: hidden;
  padding: .75rem .8rem 1.1rem;
  white-space: nowrap;
}
#page5 .tl-scroll::-webkit-scrollbar {
  height: 9px;
}
#page5 .tl-scroll::-webkit-scrollbar-track {
  background: rgba(148,163,184,.12);
  border-radius: 999px;
}
#page5 .tl-scroll::-webkit-scrollbar-thumb {
  background: rgba(79,70,229,.65);
  border-radius: 999px;
}

/* แกน X */
#page5 .tl-ticks {
  position: relative;
  height: 30px;
  margin-bottom: 6px;
}
#page5 .tl-tick {
  position: absolute;
  top: 0;
  height: 30px;
  line-height: 30px;
  font-size: .83rem;
  color: #0f172a;
  font-weight: 500;
}

/* แถว timeline และป้าย */
#page5 .tl-row {
  display: grid;
  grid-template-columns: 180px 1fr;
  gap: 6px;
  align-items: center;
  height: 54px;
  position: relative;
}
#page5 .tl-ylabel {
  font-weight: 700;
  color: #0f766e;
  white-space: nowrap;
}
#page5 .tl-ylabel.is-adr {
  color: #be123c;
}

/* แถบยา / ADR */
#page5 .tl-bar {
  position: absolute;
  top: 7px;
  height: 30px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  color: #111;
  padding: 0 .7rem;
}
#page5 .tl-bar.drug {
  background: #0ea5e9;
  box-shadow: 0 10px 20px rgba(14,165,233,.38);
}
#page5 .tl-bar.adr {
  background: #ef4444;
  box-shadow: 0 10px 20px rgba(239,68,68,.35);
}

/* ปุ่มล่างให้ชิดก้นกล่อง ไม่ลอยกลางจอ */
#page5 .tl-bottom-actions {
  position: static;
  margin-top: 1.3rem;
  background: transparent;
}
#page5 .tl-bottom-actions .btn-green-solid,
#page5 .tl-bottom-actions .btn-blue-solid,
#page5 .tl-bottom-actions .btn-red-solid {
  width: 100%;
  border-radius: 16px;
  font-weight: 700;
  box-shadow: 0 14px 20px rgba(15,23,42,.08);
}

/* ตอนพิมพ์ให้ลดเงาออก */
@media print {
  #page5 .p5-wrapper {
    box-shadow: none;
    background: #fff;
  }
  #page5 .tl-section {
    box-shadow: none;
    background: #fff;
  }
}
/* ==== หน้า 5 – ปรับสวยให้กลับมา ==== */
.p5-wrapper {
  background: linear-gradient(140deg, #fff9d9 0%, #ffe5ff 45%, #ffffff 85%);
  border-radius: 1.4rem;
  padding: 1.3rem 1.4rem 1.4rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 12px 35px rgba(246, 97, 157, 0.08);
}

.tl-section {
  background: rgba(255,255,255,.88);
  border: 1px solid rgba(15,23,42,.03);
  border-radius: 1.1rem;
  margin-bottom: 1rem;
  padding: 1.05rem 1rem 1rem;
  position: relative;
  z-index: 2;
}

.tl-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: #0f172a;
}

.tl-card {
  background: rgba(255,255,255,.95);
  border: 1px solid rgba(15,23,42,.03);
  border-radius: .9rem;
  padding: .9rem .9rem 1.2rem;
  margin-bottom: .7rem;
  box-shadow: 0 9px 16px rgba(15,23,42,.02);
}

.tl-input {
  width: 100%;
  border: 1px solid rgba(148,163,184,.35);
  border-radius: .6rem;
  padding: .35rem .5rem;
  font-size: .85rem;
  background: #fff;
}

.tl-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  border: 1px dashed rgba(15,23,42,.06);
  border-radius: 1rem;
  background: radial-gradient(circle at top, rgba(255,255,255,1) 0%, rgba(255,255,255,.4) 60%);
  min-height: 135px;
}
.tl-scroll.hidden {
  display: none;
}

.tl-tick {
  font-size: .82rem;
  color: #111827;
  white-space: nowrap;
}

.tl-ylabel {
  font-weight: 700;
  color: #115e59;
}

.tl-bar.drug { background: #0ea5e9; color: #111; }
.tl-bar.adr { background: #ef4444; color: #111; }

.tl-bottom-actions {
  position: static;     /* ไม่ลอยแล้ว */
  display: flex;
  flex-direction: column;
  gap: .75rem;
  margin-top: 1.1rem;
}
.tl-bottom-actions button {
  width: 100%;
  border-radius: 1.2rem;
  font-size: .9rem;
}

@media (max-width: 900px) {
  .tl-scroll { max-width: 100%; }
}

/* print ให้กว้างเต็ม */
@media print {
  .topbar, .tabs { display: none !important; }
  body { background: #fff; }
  #page5 { margin: 0; padding: 0; }
  .tl-scroll { overflow: visible !important; }
  .tl-bottom-actions { display: none !important; }
}
/* ===== รีสโตร์หน้าตา "หน้า 5 Timeline" แบบพาสเทลวิบวับ ===== */
#page5 {
  position: relative;
}

/* กล่องรวมของหน้า 5 */
#page5 .p5-wrapper {
  background: radial-gradient(circle at top, #fff9d5 0%, #ffe7f6 35%, #f1edff 75%);
  border: 1px solid rgba(255, 171, 184, 0.16);
  border-radius: 1.6rem;
  padding: 1.4rem 1.4rem 5.8rem;
  box-shadow: 0 18px 45px rgba(243, 159, 190, 0.08);
  position: relative;
  overflow: hidden;
}

/* เลเยอร์กลิตเตอร์วิบวับ */
#page5 .p5-glitter-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.75) 0, rgba(255,255,255,0) 42%),
    radial-gradient(circle, rgba(255,255,255,.35) 0, rgba(255,255,255,0) 45%),
    radial-gradient(circle, rgba(255,230,245,.55) 0, rgba(255,230,245,0) 55%);
  background-size: 210px 210px, 150px 150px, 260px 260px;
  mix-blend-mode: screen;
  animation: p5sparkle 10s linear infinite;
  opacity: .75;
  z-index: 0;
}
@keyframes p5sparkle {
  0%   { background-position: 0 0, 90px 120px, 40px 250px; opacity:.7; }
  50%  { background-position: 140px 100px, 30px 40px, 120px 200px; opacity:.35; }
  100% { background-position: 0 0, 90px 120px, 40px 250px; opacity:.7; }
}

/* ส่วนหัวแต่ละบล็อก (ยา / ADR / Visual timeline) */
#page5 .tl-section {
  background: rgba(255, 255, 255, .9);
  border: 1px solid rgba(255, 255, 255, .35);
  border-radius: 1.1rem;
  padding: 1.05rem 1.05rem 1.2rem;
  box-shadow: 0 12px 20px rgba(15, 23, 42, 0.02);
  backdrop-filter: blur(3px);
  margin-bottom: 1.1rem;
  position: relative;
  z-index: 1;
}

/* แถบหัวเรื่อง + ปุ่มเพิ่ม */
#page5 .tl-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: .75rem;
  margin-bottom: .6rem;
}
#page5 .tl-head h2,
#page5 .tl-head h3 {
  margin: 0;
  font-size: 1.08rem;
  font-weight: 700;
  color: #1f2a4d;
}

/* ปุ่มเพิ่มยา / เพิ่ม ADR แบบสีเดียว */
#page5 .btn-add-drug {
  background: #16a34a;
  color: #fff;
  border: none;
  border-radius: .9rem;
  padding: .55rem 1.1rem .65rem;
  font-weight: 700;
  box-shadow: 0 10px 20px rgba(22, 163, 74, .35);
  cursor: pointer;
}
#page5 .btn-add-adr {
  background: #ef4444;
  color: #fff;
  border: none;
  border-radius: .9rem;
  padding: .55rem 1.1rem .65rem;
  font-weight: 700;
  box-shadow: 0 10px 25px rgba(239,68,68,.35);
  cursor: pointer;
}

/* การ์ดรายละเอียดแต่ละรายการ (ยา/ADR) */
#page5 .tl-card {
  background: rgba(248, 250, 252, .9);
  border: 1px solid rgba(148, 163, 184, .45);
  border-radius: .9rem;
  padding: .75rem .75rem .9rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: .65rem .85rem;
  margin-bottom: .55rem;
}
#page5 .tl-card label {
  font-size: .8rem;
  color: #0f172a;
  font-weight: 600;
  display: block;
  margin-bottom: .35rem;
}
#page5 .tl-card input[type="text"],
#page5 .tl-card input[type="date"],
#page5 .tl-card input[type="time"] {
  width: 100%;
  border: 1px solid rgba(148, 163, 184, .45);
  border-radius: .6rem;
  padding: .35rem .45rem;
  font-size: .85rem;
  background: #fff;
}
#page5 .tl-card input[type="text"]:focus,
#page5 .tl-card input[type="date"]:focus,
#page5 .tl-card input[type="time"]:focus {
  outline: none;
  border: 1px solid rgba(59,130,246,.6);
  box-shadow: 0 0 0 3px rgba(59,130,246,.12);
}

/* ปุ่มลบเล็กในการ์ด */
#page5 .tl-card .tl-del {
  position: static;
  justify-self: flex-end;
  background: rgba(248,113,113,.15);
  color: #b91c1c;
  border: none;
  border-radius: .6rem;
  padding: .45rem .9rem;
  font-weight: 600;
  cursor: pointer;
}

/* กล่อง Visual timeline */
#page5 .visual-box {
  background: #fff;
  border: 1px solid rgba(148, 163, 184, .25);
  border-radius: 1.1rem;
  padding: 1rem 1.1rem 1rem;
  box-shadow: 0 8px 16px rgba(15,23,42,.02);
  position: relative;
  z-index: 1;
}
#page5 .visual-box h3 {
  margin: 0 0 .7rem;
  font-size: 1.05rem;
  font-weight: 700;
  color: #111827;
}

/* กล่องที่เลื่อนแกน X ได้ */
#page5 .tl-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  background: linear-gradient(180deg,#fff,#fff7f7);
  border: 1px dashed rgba(148,163,184,.25);
  border-radius: 1rem;
  padding: 14px 10px 12px;
}

/* แกน X และ timeline ข้างใน */
#page5 .tl-ticks {
  position: relative;
  height: 28px;
  margin-bottom: 12px;
}
#page5 .tl-tick {
  position: absolute;
  top: 0;
  font-size: .78rem;
  color: #0f172a;
}
#page5 .tl-canvas {
  position: relative;
  min-height: 120px;
}
#page5 .tl-row {
  display: grid;
  grid-template-columns: 140px 1fr;
  gap: 8px;
  align-items: center;
  min-height: 50px;
  margin-bottom: 12px;
}
#page5 .tl-ylabel {
  font-weight: 700;
  color: #0f766e;
}
#page5 .tl-ylabel.adr {
  color: #b91c1c;
}

/* แถบ timeline */
#page5 .tl-track {
  position: relative;
  height: 40px;
}
#page5 .tl-bar {
  position: absolute;
  inset-block: 6px auto;
  height: 28px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  color: #000;
  white-space: nowrap;
  padding: 0 12px;
}
#page5 .tl-bar.drug {
  background: #0ea5e9;
  box-shadow: 0 10px 24px rgba(14,165,233,.24);
}
#page5 .tl-bar.adr {
  background: #ef4444;
  box-shadow: 0 10px 24px rgba(239,68,68,.24);
}

/* ปุ่ม 3 อันด้านล่างให้ “อยู่กับที่” และเต็มความกว้าง */
#page5 .tl-bottom-actions {
  position: sticky;
  bottom: 0;
  margin-top: 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background: linear-gradient(180deg, rgba(241, 235, 255, 0), rgba(241, 235, 255, 1));
  padding: 10px 0 14px;
  z-index: 5;
}
#page5 .tl-bottom-actions button {
  width: 100%;
  border: none;
  border-radius: 1rem;
  padding: .7rem 1rem .8rem;
  font-size: .9rem;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(15,23,42,.12);
}
#page5 .tl-bottom-actions .btn-print {
  background: #16a34a;
  color: #fff;
}
#page5 .tl-bottom-actions .btn-save-next {
  background: #4f46e5;
  color: #fff;
}
#page5 .tl-bottom-actions .btn-clear {
  background: #ef4444;
  color: #fff;
}

/* ปรับตอนพิมพ์ */
@media print {
  #page5 .tl-bottom-actions,
  #page5 .btn-add-drug,
  #page5 .btn-add-adr,
  .tabs,
  .topbar {
    display: none !important;
  }
  #page5 .p5-wrapper {
    background: #fff;
    box-shadow: none;
    padding: 0;
  }
  #page5 .tl-scroll {
    overflow: visible;
  }
}
/* ===== หน้า 5 (Timeline) สไตล์ใหม่ให้เหมือนก่อนหน้า ===== */
.p5-timeline-shell {
  background: linear-gradient(180deg, #fff7e6 0%, #fef5ff 65%, #ffffff 100%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 1.6rem;
  padding: 1.4rem 1.1rem 6.2rem;
  position: relative;
  overflow: hidden;
  box-shadow: 0 16px 30px rgba(248, 113, 113, 0.06);
}
.p5-bg-layer {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 5% 0%, rgba(255, 243, 207, 0.8), rgba(255,255,255,0));
  pointer-events: none;
}

/* กล่องยา / ADR */
.tl-section {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(148, 163, 184, 0.14);
  border-radius: 1.2rem;
  padding: 1rem 1rem 1.2rem;
  margin-bottom: 1rem;
  backdrop-filter: blur(2px);
}
.tl-drug-card { margin-bottom: 1rem; }
.tl-adr-card { margin-bottom: 1rem; }

.tl-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: .5rem;
  margin-bottom: .6rem;
}
.tl-head h2 {
  margin: 0;
  font-size: 1.3rem;
  font-weight: 700;
  color: #0f172a;
  display: flex;
  gap: .35rem;
  align-items: center;
}
.tl-head .icon {
  font-size: 1.25rem;
}

.tl-head-actions {
  display: flex;
  gap: .4rem;
  align-items: center;
}

.tl-del-btn-all {
  background: rgba(248, 113, 113, 0.08);
  color: #b91c1c;
  border: 1px solid rgba(248, 113, 113, 0.3);
  border-radius: .6rem;
  padding: .35rem .6rem .3rem;
  font-size: .75rem;
  cursor: pointer;
}
.tl-hide { display: none !important; }

.tl-card {
  background: rgba(255,255,255,0.9);
  border: 1px solid rgba(148,163,184,.12);
  border-radius: 1rem;
  padding: .7rem .7rem .6rem;
  margin-bottom: .6rem;
  box-shadow: 0 10px 20px rgba(15,23,42,.04);
}

.tl-row-top {
  display: flex;
  flex-direction: column;
  gap: .35rem;
  margin-bottom: .55rem;
}
.tl-row-top label {
  font-weight: 600;
  color: #0f172a;
}

.tl-input {
  border: 1px solid rgba(148,163,184,.35);
  border-radius: .7rem;
  padding: .35rem .6rem;
  font-size: .88rem;
  background: #fff;
  outline: none;
}
.tl-input:focus {
  border-color: rgba(59,130,246,.55);
  box-shadow: 0 0 0 3px rgba(59,130,246,.08);
}

.tl-grid2 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: .6rem .8rem;
}
.tl-inline {
  display: flex;
  gap: .4rem;
  align-items: center;
}

/* timeline view */
#p5_tlScroll {
  overflow-x: auto;
  overflow-y: hidden;
  border: 1px dashed rgba(148,163,184,.30);
  border-radius: 1.2rem;
  background: linear-gradient(180deg, #fff, rgba(255,255,255,.6));
  padding: .7rem .4rem 1.4rem;
}
#p5_tlAxis {
  position: relative;
  height: 30px;
}
.tl-tick {
  position: absolute;
  top: 0;
  font-size: .82rem;
  color: #111;
}
#p5_tlCanvas {
  position: relative;
  min-height: 130px;
}
.tl-row {
  position: absolute;
  left: 0;
  right: 0;
  display: grid;
  grid-template-columns: 140px 1fr;
  gap: .4rem;
  align-items: center;
  height: 58px;
}
.tl-ylabel {
  font-weight: 700;
  color: #0f766e;
  padding-left: .4rem;
}
.tl-ylabel-adr {
  color: #b91c1c;
}
.tl-track {
  position: relative;
  height: 44px;
}
.tl-bar {
  position: absolute;
  top: 7px;
  height: 28px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  color: #000;
  white-space: nowrap;
}
.tl-bar.drug {
  background: #0ea5e9;
  box-shadow: 0 10px 20px rgba(14,165,233,.35);
}
.tl-bar.adr {
  background: #ef4444;
  box-shadow: 0 10px 20px rgba(239,68,68,.25);
}

/* แสดงเวลาปัจจุบัน */
.p5-nowbox {
  margin-top: .3rem;
  margin-bottom: .4rem;
  font-weight: 600;
  color: #0f172a;
  display: flex;
  gap: .4rem;
  align-items: center;
}
.p5-nowbox::before {
  content: "📅";
}

/* ปุ่มล่างให้ติดท้ายหน้า */
.tl-bottom-actions-fixed {
  position: sticky;
  bottom: 0;
  display: flex;
  flex-direction: column;
  gap: .5rem;
  background: linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,1));
  padding-top: .9rem;
}
/* ===== ปรับความสูง timeline ไม่ให้บาร์ไปทับ scrollbar ===== */
#p5_tlScroll {
  padding-bottom: 2.6rem;
}

#p5_tlCanvas {
  min-height: 180px; /* เดิม 130px มันต่ำไป */
}

/* ปุ่มลบที่อยู่ข้างปุ่มเขียว/แดงให้จิ๋วลง */
.tl-head-actions .tl-del-btn-all {
  font-size: .7rem;
  padding: .32rem .55rem .28rem;
  border-radius: .5rem;
}
/* หน้า 5 ปุ่มลบเล็กข้างปุ่มเพิ่ม */
.p5-mini-del-btn {
  background: #fee2e2;
  border: none;
  color: #b91c1c;
  font-weight: 600;
  padding: .35rem .6rem .3rem;
  border-radius: .6rem;
  cursor: pointer;
}
.p5-mini-del-btn:hover {
  background: #fecaca;
}

/* ให้ timeline สูงพอ มองเห็นบาร์ */
#p5_tlScroll {
  padding-bottom: 2.6rem;
}
#p5_tlCanvas {
  min-height: 200px;
}

/* ===== หน้า 5 Timeline ใหม่ ===== */
.p5-shell{
  background: radial-gradient(circle at 0 0, #f5ddff 0%, #fde7f4 40%, #ffffff 75%);
  border: 1px solid rgba(131,80,255,.12);
  border-radius: 1.3rem;
  padding: 1.4rem 1.5rem 5.5rem;
  box-shadow: 0 25px 45px rgba(120,53,255,.07);
  position: relative;
  overflow: hidden;
}
.p5-head-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:1rem;
  margin-bottom:1rem;
}
.p5-title-left{display:flex;align-items:center;gap:.8rem;}
.p5-icon{
  width:40px;height:40px;
  background:linear-gradient(140deg,#6366f1,#a855f7);
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:1.25rem;
  color:#fff;
  box-shadow:0 10px 25px rgba(99,102,241,.25);
}
.p5-icon.pink{background:linear-gradient(140deg,#f43f5e,#fb7185);}
.p5-title{margin:0;font-size:1.3rem;color:#1f2937;font-weight:700;}
.p5-subtitle{margin:0;color:#475569;font-size:.82rem;}
.p5-right-actions{display:flex;gap:.5rem;align-items:center;}
.p5-btn-green,
.p5-btn-red,
.p5-btn-purple,
.p5-btn-blue,
.p5-btn-danger{
  border:none;
  border-radius:.9rem;
  padding:.55rem 1.2rem;
  font-weight:600;
  cursor:pointer;
  color:#fff;
  box-shadow:0 12px 30px rgba(15,23,42,.12);
}
.p5-btn-green{background:#22c55e;}
.p5-btn-red{background:#ef4444;}
.p5-btn-blue{background:#3b82f6;}
.p5-btn-purple{background:#6366f1;}
.p5-btn-danger{background:#f97316;}
.p5-btn-ghost{
  border:1px solid rgba(15,23,42,.18);
  background:#fff;
  color:#0f172a;
  border-radius:.6rem;
  padding:.36rem .8rem;
  font-weight:500;
  cursor:pointer;
}
.p5-card{
  background:rgba(255,255,255,.9);
  border:1px solid rgba(148,163,184,.18);
  border-radius:1rem;
  padding:1rem 1rem 1.1rem;
  margin-bottom:.9rem;
  box-shadow:0 12px 30px rgba(15,23,42,.03);
}
.p5-card-head{display:flex;gap:.45rem;align-items:center;margin-bottom:.6rem;}
.p5-dot{width:14px;height:14px;border-radius:999px;}
.p5-dot.blue{background:#38bdf8;}
.p5-dot.red{background:#ef4444;}
.p5-card-title{font-weight:700;color:#0f172a;}
.p5-field{display:flex;flex-direction:column;gap:.35rem;margin-bottom:.7rem;}
.p5-field span{font-weight:500;color:#1f2937;}
.p5-inp{
  border:1px solid rgba(148,163,184,.35);
  border-radius:.6rem;
  padding:.4rem .55rem;
  font-size:.9rem;
  outline:none;
  background:#fff;
}
.p5-inp:focus{box-shadow:0 0 0 3px rgba(99,102,241,.12);}
.p5-time{max-width:110px;margin-top:.4rem;}
.p5-two-cols{display:flex;gap:1.2rem;flex-wrap:wrap;}
.p5-adr-gap{margin-top:1.4rem;}
.p5-datetime-row{
  margin-top:1.1rem;
  margin-bottom:.5rem;
  background:rgba(255,255,255,.35);
  border:1px solid rgba(148,163,184,.08);
  border-radius:.7rem;
  padding:.5rem .8rem;
  color:#0f172a;
  font-weight:500;
}
.p5-timeline-block{
  background:rgba(255,255,255,.36);
  border:1px dashed rgba(148,163,184,.45);
  border-radius:1rem;
  padding:1rem .6rem 1.1rem;
  margin-top:.7rem;
}
.p5-section-title{margin:0 0 .6rem 0;font-size:1.05rem;color:#0f172a;font-weight:700;}
.p5-timeline-scroll{
  overflow-x:auto;
  overflow-y:hidden;
  background:linear-gradient(180deg,rgba(255,255,255,1),rgba(255,255,255,.6));
  border-radius:1rem;
  border:1px solid rgba(226,232,240,.4);
  padding:.8rem .3rem .5rem;
}
.p5-axis{position:relative;height:44px;margin-left:120px;}
.p5-axis-line{
  position:absolute;
  top:38px;
  left:0;
  height:2px;
  background:#e2e8f0;
}
.p5-tick{
  position:absolute;
  top:0;
  font-size:.78rem;
  color:#0f172a;
  transform:translateX(-15%);
}
.p5-lines{
  display:grid;
  grid-template-columns:120px 1fr;
  gap:.4rem 0;
  align-items:flex-start;
  margin-top:.6rem;
}
.p5-row-label{
  font-weight:700;
  color:#0f766e;
  padding-top:.8rem;
}
.p5-row-label.red{color:#ef4444;}
.p5-row-track{
  position:relative;
  height:66px;
  margin-bottom:.3rem;
}
.p5-bar{
  position:absolute;
  top:18px;
  height:36px;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  color:#fff;
  box-shadow:0 14px 30px rgba(15,23,42,.08);
  white-space:nowrap;
  padding:0 16px;
}
.p5-bar.drug{background:#2563eb;}
.p5-bar.adr{background:#ef4444;}
.p5-bottom-btns{
  display:flex;
  gap:.7rem;
  margin-top:1rem;
  position:sticky;
  bottom:0;
  background:linear-gradient(180deg,rgba(253,246,255,0),rgba(253,246,255,1));
  padding:.5rem .3rem 0;
}
@media(max-width:920px){
  .p5-head-row{flex-direction:column;align-items:flex-start;}
  .p5-lines{grid-template-columns:90px 1fr;}
  .p5-axis{margin-left:90px;}
  .p5-bottom-btns{flex-direction:column;}
}
@media print {
  .topbar, .tabs, .p5-bottom-btns, .p5-head-row, .p5-datetime-row{display:none!important;}
  #page5{margin:0;padding:0;}
  .p5-timeline-scroll{overflow:visible;}
}
